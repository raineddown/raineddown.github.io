<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="baidu-site-verification" content="093lY4ziMu" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="A hexo theme">
    <meta name="keyword"  content="dusign, hexo-theme-snail">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!--<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
    <title>
        
          ETL数据清洗脚本kettle - radarsoftware
        
    </title>

    <link rel="canonical" href="http://radarsoftware.cn/2024/11/07/ETL数据清洗脚本kettle/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
        
<link rel="stylesheet" href="/css/dusign-light.css">

        
<link rel="stylesheet" href="/css/dusign-common-light.css">

        
<link rel="stylesheet" href="/css/font-awesome.css">

        
<link rel="stylesheet" href="/css/toc.css">

        <!-- background effects end -->
    
    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/fonts.googleapis.css">


    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- photography -->
    
<link rel="stylesheet" href="/css/photography.css">


    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.0"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- background effects start -->
    
    <!-- background effects end -->

	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            
                background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('/img/header_img/Iron-Man-3.jpg')
                /*post*/
            
        
    }
    
    #signature{
        background-image: url('/img/signature/dusign.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#kettle" title="kettle">kettle</a>
                            
                        </div>
                        <h1>ETL数据清洗脚本kettle</h1>
                        <h2 class="subheading">kettle</h2>
                        <span class="meta">
                            Posted by John Doe on
                            2024-11-07
                        </span>

                        
                            <div class="blank_box"></div>
                            <span class="meta">
                                Words <span class="post-count">16.8k</span> and
                                Reading Time <span class="post-count">58</span> Minutes
                            </span>
                            <div class="blank_box"></div>
                            <!-- 不蒜子统计 start -->
                            <span class="meta">
                                Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
                            </span>
                            <!-- 不蒜子统计 end -->
                        

                    </div>
                

                </div>
            </div>
        </div>      
    </div>

    
    <div class="waveWrapper">
        <div class="wave wave_before" style="background-image: url('/img/wave-light.png')"></div>
        <div class="wave wave_after" style="background-image: url('/img/wave-light.png')"></div>
    </div>
    
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Welcome to heavy rain&#39;s website</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/categories/">Categories</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/photography/">Photography</a>
                        </li>
                        
                    
                    
                    
                    <li>
                        <a href="https://blog.csdn.net/Where_dWanaGo" target="_blank">Chinese Blog</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h3 id="Kettle简介"><a href="#Kettle简介" class="headerlink" title="Kettle简介"></a>Kettle简介</h3><h3 id="一、Kettle简介"><a href="#一、Kettle简介" class="headerlink" title="一、Kettle简介"></a>一、Kettle简介</h3><p>Kettle是一款国外开源的ETL工具，纯<strong>Java</strong>编写，可以在Window、Linux、Unix上运行，绿色无需安装，数据抽取高效稳定。</p>
<p>Kettle 中文名称叫水壶，该项目的主程序员MATT希望把各种数据放到一个壶里，然后以一种指定的格式流出。</p>
<p>Kettle这个<strong>ETL工具集</strong>，它允许你管理来自不同数据库的数据，通过提供一个图形化的用户环境来描述你想做什么，而不是你想怎么做。</p>
<p>Kettle中有两种脚本文件，<strong>Transformation</strong>和<strong>Job</strong>，transformation完成针对数据的基础转换，Job则完成整个工作流的控制。</p>
<p>Kettle，现在已经更名为PDI（Pentaho Data Integration-Pentaho，即数据集成）。</p>
<p>以下是官方网站地址</p>
<p><a href="http://www.kettle.org.cn/" target="_blank" rel="noopener">Kettle中文网</a> </p>
<p><a href="https://github.com/pentaho/pentaho-kettle" target="_blank" rel="noopener">Kettle github地址</a> </p>
<p>附: ETL简介</p>
<p><strong>ETL（Extract-Transform-Load的缩写，即数据抽取、转换、装载的过程）</strong>，对于企业或行业应用来说，我们经常会遇到各种数据的处理，转换，迁移，所以了解并掌握一种etl工具的使用，必不可少，这里我介绍一个我在工作中使用了3年左右的ETL工具Kettle,本着好东西不独享的想法，跟大家分享碰撞交流一下！在使用中我感觉这个工具真的很强大，支持图形化的GUI设计界面，然后可以以工作流的形式流转，在做一些简单或复杂的数据抽取、质量检测、数据清洗、数据转换、数据过滤等方面有着比较稳定的表现，其中最主要的我们通过熟练的应用它，减少了非常多的研发工作量，提高了我们的工作效率</p>
<h4 id="kettle的特点"><a href="#kettle的特点" class="headerlink" title="kettle的特点"></a>kettle的特点</h4><ol>
<li><strong>无代码拖拽式构建数据管道</strong></li>
</ol>
<p>Kettle采用拖拽组件、连线、配置的方式来构建<strong>数据管道</strong>，透过超过200个不同的组件，用户可以在不编写一句代码就能轻松完成对数据源读取，对数据进行关联、过滤、格式转换、计算、统计、建模、挖掘、输出到不同的数据目标。极大程度地<strong>降低开发技术门槛</strong>和有效<strong>减低开发和维护成本</strong>。</p>
<ol>
<li><strong>多数据源对接</strong></li>
</ol>
<ul>
<li>关系型数据库支持类型包括：AS/400，DB2，Google BigQuery，Greenplum，Hive，Impala，MS SQL Server，MySQL，Oracle，PostgreSQL，SAP，Snowflake，SparkSQL，Sybase，Teradata, Vertica等。</li>
<li>大数据源支持包括：Avro，Cassanddra，HBase，HDFS，MongoDB，ORC, Parquet, Splunk等。</li>
<li>文件格式支持包括：CSV, TXT, JSON, Excel, XML等。</li>
<li>流数据支持包括：AMPQ，JMS，Kafka，Kinesis，MQTT。</li>
<li>其他数据源对接包括：HL7，S3，SAS，Salesforce，HCP，REST等。</li>
</ul>
<ol>
<li><strong>数据管道可视化</strong></li>
</ol>
<p>Kettle支持用户在数据管道任何一个步骤对当前数据进行查看（Examine），并可以在线以表格和图表（例如：柱状图、饼图等）输出步骤的数据，甚至可以支持不落地直接把任何一个步骤的数据以JDBC的方式提供给第三方应用访问。</p>
<ol>
<li><strong>模板化开发数据管道</strong></li>
</ol>
<p>Kettle提供了一个叫<strong>MDI</strong>的功能，MDI全称是Metadata Injection元数据注入，用户可以透过MDI把数据转换模板化，然后把像数据表名、文件路径、分隔符、字符集等等这些变量放在一个表或者文件里，然后利用MDI把这些变量注入数据转换模板，Kettle就能够自动生成所需要的数据转换了。这个功能为很多客户节省了大量的开发时间。</p>
<ol>
<li><strong>可视化计划任务</strong></li>
</ol>
<ul>
<li>Kettle提供可视化方式配置任务计划（Schedule），用户可透过Spoon或网页端的Pentaho User Console来配置和维护任务具体的执行时间、间隔、所使用的参数值、以及具体运行的服务器节点。</li>
<li>用户亦可以透过Spoon或Pentaho User Console查看任务计划列表；当然，用户也可以透过Spoon或Pentaho User Console对任务执行情况进行实时监控。</li>
</ul>
<ol>
<li><strong>深度Hadoop支持</strong></li>
</ol>
<ul>
<li>Kettle针对Hadoop主流厂家预置专用的对接插件，支持的Hadoop版本包括Cloudera，Hortonworks，AWS EMR，Google Dataproc等，用户除了可以透过插件轻松<strong>对接Hadoop集群的数据源</strong>（HDFS，Hive，HBase，Impala等）以外，Pentaho还提供与Kerberos、Sentry和Ranger等Hadoop企业级安全机制对接，以满足企业安全要求。</li>
<li>另外，Pentaho Data Integration的Pentaho MapReduce提供用户以<strong>无编码方式</strong>定义MapReduce任务；同时，用户亦可以在作业中执行Sqoop、Pig、MapReduce、Oozie和Spark任务。</li>
</ul>
<ol>
<li><strong>数据任务下压Spark集群</strong></li>
</ol>
<p>Kettle提供了把数据转换任务下压到Spark来执行的<strong>AEL（Adaptive Execution Layer）</strong>功能，搭建好的数据管道会被AEL转成Spark任务来执行，这样数据就不需要离开集群，而是在集群里透过Spark强大的分布式处理能力来进行处理。</p>
<ol>
<li><strong>数据挖掘与机器学习支持</strong></li>
</ol>
<ul>
<li>最新版的Pentaho9.1预置了超过20种数据挖掘算法类的转换步骤，用户可以轻松把把机器学习集成到数据管道里，用来做数据模型训练和进行预测分析。</li>
<li>预置算法包括：决策树、深度学习、线性回归、逻辑回归、Naive贝尔斯、随机森林等等，用户也可以利用Pentaho Data Integration作数据预备，然后把数据以dataframe的方式输入到Python或R中进行模型训练或预测。</li>
</ul>
<h2 id="二、Kettle-安装与部署"><a href="#二、Kettle-安装与部署" class="headerlink" title="二、Kettle 安装与部署"></a>二、Kettle 安装与部署</h2><hr>
<h3 id="2-1、下载"><a href="#2-1、下载" class="headerlink" title="2.1、下载"></a>2.1、下载</h3><p>Kettle官方网址：Home - Hitachi Vantara，目前最新是9.2版本的。</p>
<p>进入官网后选择 –&gt;Data Integration，找到Downloads，看到稳定版本为Data Integration 8.2，选择进行下载即可。</p>
<h3 id="2-2、安装"><a href="#2-2、安装" class="headerlink" title="2.2、安装"></a>2.2、安装</h3><ul>
<li>下载好的压缩包进行解压</li>
</ul>
<p><img src="/img/kettle/kettle.png" alt="kettle"> </p>
<ul>
<li>打开解压之后的data-integration文件夹</li>
</ul>
<p><img src="/img/kettle/kettle0.png" alt="kettle"> </p>
<ul>
<li>Windows系统，点击Spoon.bat运行；Linux系统点击Spoon.sh运行</li>
</ul>
<p><img src="/img/kettle/kettle1.png" alt="kettle"> </p>
<h3 id="2-3、环境变量配置"><a href="#2-3、环境变量配置" class="headerlink" title="2.3、环境变量配置"></a>2.3、环境变量配置</h3><p>因为Kettle是纯Java开发的，因此下载以后需要配置一下<strong>环境变量</strong>。需要先安装<strong>JDK</strong>，准备好Java软件的运行环境，安装jdk1.8版本即可，具体操作可参考百度。</p>
<h3 id="2-4、常见问题"><a href="#2-4、常见问题" class="headerlink" title="2.4、常见问题"></a>2.4、常见问题</h3><ol>
<li><strong>启动Kettle后，页面右上角不出现Connect。</strong></li>
</ol>
<p><img src="/img/kettle/kettle2.png" alt="kettle"> </p>
<h3 id="解决方法：打开系统盘用户目录下的repositories-xml配置文件，将乱码内容删除，并删除-spoonrc文件，重启Kettle。"><a href="#解决方法：打开系统盘用户目录下的repositories-xml配置文件，将乱码内容删除，并删除-spoonrc文件，重启Kettle。" class="headerlink" title="解决方法：打开系统盘用户目录下的repositories.xml配置文件，将乱码内容删除，并删除.spoonrc文件，重启Kettle。"></a>解决方法：打开系统盘用户目录下的repositories.xml配置文件，将乱码内容删除，并删除.spoonrc文件，重启Kettle。</h3><p><img src="/img/kettle/kettle3.png" alt="kettle"> </p>
<p><strong>2、可视化界面spoon.bat打不开，JVM提示不能正常启动</strong></p>
<p>解决方法：</p>
<ul>
<li>检查环境变量的配置</li>
<li>检查JDK版本，新版本最好用1.6以上</li>
<li>新安装了高版本jdk，环境变量也没问题，但是java -version 版本还是老的，那就检查一下原版本的的快捷方式java.exe还在不在，在的话就删掉。</li>
<li>以文本方式打开spoon.bat ，修改内存配置</li>
</ul>
<p><strong>3、连接数据库找不到驱动问题（以MySQL为例）</strong></p>
<p>提示错误：</p>
<blockquote>
<p>[mysql] : org.pentaho.di.core.exception.KettleDatabaseException: </p>
<p>Error occured while trying to connect to the database</p>
<p>Driver class ‘org.gjt.mm.mysql.Driver’ could not be found, make sure the ‘MySQL’ driver (jar file) is installed.</p>
<p>org.gjt.mm.mysql.Driver</p>
</blockquote>
<p>解决办法：把mysql-connector-java-5.1.37-bin.jar拷贝到 \pdi-ce-6.0.1.0-386\data-integration\lib下面，然后重新启动spoon即可。</p>
<h2 id="三、Kettle-运行界面与基本概念"><a href="#三、Kettle-运行界面与基本概念" class="headerlink" title="三、Kettle 运行界面与基本概念"></a>三、Kettle 运行界面与基本概念</h2><hr>
<h3 id="3-1、运行界面"><a href="#3-1、运行界面" class="headerlink" title="3.1、运行界面"></a>3.1、运行界面</h3><p><img src="/img/kettle/kettle4.png" alt="kettle"> </p>
<h3 id="3-2、基本概念"><a href="#3-2、基本概念" class="headerlink" title="3.2、基本概念"></a>3.2、基本概念</h3><h4 id="1）可视化编程"><a href="#1）可视化编程" class="headerlink" title="1）可视化编程"></a>1）可视化编程</h4><p>Kettle可以被归类为<strong>可视化编程语言</strong>（Visual Programming Languages，VPL），因为Kettle可以使用图形化的方式<strong>定义复杂的ETL程序和工作流</strong>。</p>
<p>Kettle里的图就是<strong>转换</strong>和<strong>作业</strong>。</p>
<p>可视化编程一直是Kettle里的核心概念，它可以让你<strong>快速构建复杂的ETL作业</strong>和<strong>减低维护工作量</strong>，它通过隐藏很多技术细节，使IT领域更贴近与商务领域。</p>
<h4 id="2）转换（Transformation）"><a href="#2）转换（Transformation）" class="headerlink" title="2）转换（Transformation）"></a><strong>2）转换（Transformation）</strong></h4><ul>
<li>转换是ETL解决方案中最主要的部分，它处理<strong>抽取、转换、加载</strong>各种对数据行的操作。</li>
<li>转换包含一个或多个<strong>步骤（step）</strong>，如读取文件、过滤数据行、数据清洗或将数据加载到数据库。</li>
<li>转换里的步骤通过<strong>跳（hop）</strong>来连接，跳定义一个单向通道，允许数据从一个步骤向另一个步骤流动。</li>
<li>在Kettle里，数据的单位是<strong>行</strong>，数据流就是数据行从一个步骤到另一个步骤的移动。</li>
<li><strong>数据流</strong>有的时候也被称之为<strong>记录流</strong>。</li>
</ul>
<p><img src="/img/kettle/kettle4-1.png" alt="kettle"> </p>
<h4 id="3）步骤（Step）"><a href="#3）步骤（Step）" class="headerlink" title="3）步骤（Step）"></a>3）步骤（Step）</h4><p>Kettle里面的，Step步骤（控件）是转换里的基本的组成部分。一个步骤有如下几个关键特性：</p>
<ul>
<li>步骤需要有一个名字，这个名字在<strong>转换范围</strong>内<strong>唯一</strong>。</li>
<li>每个步骤都会<strong>读、写</strong>数据行（唯一例外是“生成记录”步骤，该步骤只写数据）。</li>
<li>步骤将数据写到与之相连的一个或多个输出<strong>跳</strong>，再传送到跳的另一端的<strong>步骤</strong>。</li>
<li>大多数的步骤都可以有<strong>多个输出跳</strong>。一个步骤的数据发送可以被被设置为<strong>分发</strong>和<strong>复制</strong>，分发是目标步骤轮流接收记录，复制是所有的记录被同时发送到所有的目标步骤。</li>
</ul>
<h4 id="4）跳（Hop）"><a href="#4）跳（Hop）" class="headerlink" title="4）跳（Hop）"></a>4）跳（Hop）</h4><p>Kettle里面的跳即步骤之间带箭头的连线，跳定义了步骤之间的<strong>数据通路</strong>。</p>
<p><img src="/img/kettle/kettle5.png" alt="kettle"> </p>
<ul>
<li>跳实际上是两个步骤之间的被称之为<strong>行集</strong>的数据行缓存（行集的大小可以在转换的设置里定义）。</li>
<li>当行集满了，向行集写数据的步骤将停止写入，直到行集里又有了空间。</li>
<li>当行集空了，从行集读取数据的步骤停止读取，直到行集里又有可读的数据行。</li>
</ul>
<h4 id="5）数据行——数据类型"><a href="#5）数据行——数据类型" class="headerlink" title="5）数据行——数据类型"></a>5）数据行——数据类型</h4><p>数据以数据行的形式沿着步骤移动。一个数据行是零到多个字段的集合，字段包含下面几种数据类型。</p>
<ul>
<li>String：字符类型数据</li>
<li>Number：双精度浮点数。</li>
<li>Integer：带符号长整型（64位）。</li>
<li>BigNumber：任意精度数据。</li>
<li>Date：带毫秒精度的日期时间值。</li>
<li>Boolean：取值为true和false的布尔值。</li>
<li>Binary：二进制字段可以包含图像、声音、视频及其他类型的二进制数据。</li>
</ul>
<h4 id="6）数据行——元数据"><a href="#6）数据行——元数据" class="headerlink" title="6）数据行——元数据"></a>6）数据行——元数据</h4><p>每个步骤在输出数据行时都有对字段的描述，这种描述就是数据行的元数据。通常包含下面一些信息。</p>
<ul>
<li>名称：行里的字段名应用是唯一的。</li>
<li>数据类型：字段的数据类型。</li>
<li>格式：数据显示的方式，如Integer的#、0.00。</li>
<li>长度：字符串的长度或者BigNumber类型的长度。</li>
<li>精度：BigNumber数据类型的十进制精度。</li>
<li>货币符号：￥。</li>
<li>小数点符号:十进制数据的小数点格式。不同文化背景下小数点符号是不同的，一般是点（.）或逗号（，）。</li>
<li>分组符号：数值类型数据的分组符号，不同文化背景下数字里的分组符号也是不同的，一般是点（.）或逗号（，）或单引号（’）。</li>
</ul>
<h4 id="7）日志——I-O-R-W-U-E"><a href="#7）日志——I-O-R-W-U-E" class="headerlink" title="7）日志——I O R W U E"></a><strong>7）日志——</strong>I O R W U E</h4><p><img src="/img/kettle/kettle6.png" alt="kettle"> </p>
<p>(I=669, O=0, R=0, W=668, U=0, E=0)</p>
<p> I  是指当前 (步骤) 生成的记录（从表输入、文件读入）<br>O 是指当前 (步骤) 输出的记录数（输出到文件、表）<br>R 是指当前 (步骤) 从前一步骤读取的记录数<br>W 是指当前 (步骤) 向后面步骤抛出的记录数<br>U 是指当前 (步骤) 更新过的记录数<br>E 是指当前 (步骤) 处理的记录数</p>
<h2 id="四、Kettle-读取CSV文件"><a href="#四、Kettle-读取CSV文件" class="headerlink" title="四、Kettle 读取CSV文件"></a>四、Kettle 读取CSV文件</h2><hr>
<h3 id="4-1、输入"><a href="#4-1、输入" class="headerlink" title="4.1、输入"></a><strong>4.1、输入</strong></h3><p>就是用来<strong>抽取数据</strong>或<strong>生成数据</strong>的操作。是ETL操作的E(Extraction)。</p>
<h3 id="4-2、CVS文件"><a href="#4-2、CVS文件" class="headerlink" title="4.2、CVS文件"></a>4.2、CVS文件</h3><p>是一种带有<strong>固定格式</strong>的<strong>文本文件</strong>。</p>
<p>假设我们的目的是读取 CSV 文件，在 Excel 中输出。当然，这种简单操作完全不需要 Kettle，Excel 直接就可以打开并转换。练习的目的是从易到难，逐步掌握 Kettle 的用法。</p>
<p>CSV 文件是一种常见的文本文件，一般含有表头和行项目。大多数数据处理型软件都含有对 CSV 格式的支持。进入 Spoon 的主界面，通过菜单 [文件] –&gt; [新建] –&gt; [转换] 新建一个转换。</p>
<p><img src="/img/kettle/kettle8.png" alt="kettle"> </p>
<p>在左边的核心对象中，找到输入文件夹下面的CSV文件输入，将其拖到右边的工作区。双击CSV文件输入图标，通过浏览按钮找到 想要读取的 CSV 文件：</p>
<p><img src="/img/kettle/kettle9.png" alt="kettle"> </p>
<p>点击对话框中的 “获取字段” 按钮，自动获得 CSV 文件各列的表头。之所以可以这样，是因为 “包含列头行” 默认选中。点击 “预览” 按钮可以预览数据。如果是中文，注意文件的编码。</p>
<p><img src="/img/kettle/kettle10.png" alt="kettle"> </p>
<p>在左边导航区的 “输出” 文件夹下，将 “Excel输出” 步骤拖放到右边的工作区。选中步骤 “CSV文件输入”，通过 shift+鼠标拖动，连接两个步骤，此时界面如下：</p>
<p><img src="/img/kettle/kettle11.png" alt="kettle"> </p>
<p>双击 “Excel输出”，设置文件名和扩展名：</p>
<p><img src="/img/kettle/kettle12.png" alt="kettle"> </p>
<p>切换到 “字段” 页签，点击 “获取字段” 按钮，获取需要输出的字段，可以删除不想要的字段，然后点击 “确定” 按钮：</p>
<p><img src="/img/kettle/kettle13.png" alt="kettle"> </p>
<p>运行之前保存，转换被保存为扩展名为 ktr 的文件，这个文件是 xml 格式的文本文件，可以用 spoon 打开。然后点击 “运行”，即可以将 CSV 文件转换成 Excel 文件。</p>
<h3 id="4-3、多个文件输入"><a href="#4-3、多个文件输入" class="headerlink" title="4.3、多个文件输入"></a>4.3、多个文件输入</h3><p>在导航区 “核心对象” 中，找到 “输入” 文件夹下 “获取文件名”，拖到工作区。设置如下：</p>
<p><img src="/img/kettle/kettle14.png" alt="kettle"> </p>
<p>点击 “预览记录” 按钮，查看包含的文件，两个文件都被读取到。filename 是在下一步要使用的文件路径，属于输出的变量。</p>
<p><img src="/img/kettle/kettle15.png" alt="kettle"> </p>
<p>将 “获取文件名” 步骤连接至 “CSV文件输入” 步骤。此时，“CSV文件输入” 步骤的界面中，文件名字段为数据来源于前一步骤，选择 filename。其他相同。</p>
<p><img src="/img/kettle/kettle16.png" alt="kettle"> </p>
<p>运行，可以把两个 CSV 文件中的数据加载并输出到 Excel 文件中。输入的文件格式，比如文本文件、Excel 文件大体类似。</p>
<h2 id="五、Kettle-导入文件夹下的多个文件"><a href="#五、Kettle-导入文件夹下的多个文件" class="headerlink" title="五、Kettle 导入文件夹下的多个文件"></a>五、Kettle 导入文件夹下的多个文件</h2><hr>
<h3 id="5-1、任务描述"><a href="#5-1、任务描述" class="headerlink" title="5.1、任务描述"></a>5.1、任务描述</h3><p>在一个文件夹下有几百个文本文件，每个文件内容的格式相同，都是有固定分隔符的两列，每个文件有几千行记录。</p>
<p>Kettle的转换处理数据流，其中有一个“文本文件输入”的输入对象，可以使用它在导入文件数据时添加上文件名字段，而且支持正则表达式同时获取多个文件名，正好适用此场景。</p>
<h3 id="5-2、操作过程"><a href="#5-2、操作过程" class="headerlink" title="5.2、操作过程"></a>5.2、操作过程</h3><h4 id="1-新建一个转换"><a href="#1-新建一个转换" class="headerlink" title="1. 新建一个转换"></a>1. 新建一个转换</h4><p>包含“获取文件名”、“拆分字段2”、“拆分字段”、“表输出”四个步骤，如下图所示。</p>
<p><img src="/img/kettle/kettle17.png" alt="kettle"> </p>
<p><img src="/img/kettle/kettle18.png" alt="kettle"> </p>
<h4 id="2-“文本文件输入”"><a href="#2-“文本文件输入”" class="headerlink" title="2. “文本文件输入”"></a>2. “文本文件输入”</h4><p>如下图所示。 正则表达式.<em>test.</em>  意思是查找以test开头的文件。</p>
<p><img src="/img/kettle/kettle19.png" alt="kettle"> </p>
<h4 id="3-拆分字段"><a href="#3-拆分字段" class="headerlink" title="3.拆分字段"></a>3.拆分字段</h4><p>按照分隔符“|”将字段field_1拆成field_000和field_111</p>
<p><img src="/img/kettle/kettle20.png" alt="kettle"> </p>
<h4 id="5-表输出"><a href="#5-表输出" class="headerlink" title="5.表输出"></a>5.表输出</h4><p><img src="/img/kettle/kettle21.png" alt="kettle"> <img src="/img/kettle/kettle22.png" alt="kettle"> </p>
<h4 id="6-启动运行"><a href="#6-启动运行" class="headerlink" title="6.启动运行"></a>6.启动运行</h4><h2 id="六、Kettle-创建数据库连接"><a href="#六、Kettle-创建数据库连接" class="headerlink" title="六、Kettle 创建数据库连接"></a>六、Kettle 创建数据库连接</h2><hr>
<h3 id="6-1、任务描述书"><a href="#6-1、任务描述书" class="headerlink" title="6.1、任务描述书"></a>6.1、任务描述书</h3><p>抽取数据库数据，第一步是创建数据库连接，为数据操作提供桥梁。</p>
<p>为了方便抽取MySQL的“demodb”数据库中的数据表，需要创建一个数据库连接，访问“demodb”数据库。</p>
<h3 id="6-2、实现思路"><a href="#6-2、实现思路" class="headerlink" title="6.2、实现思路"></a>6.2、实现思路</h3><ul>
<li>建立数据库连接</li>
<li>设置数据库连接参数</li>
<li>测试和预览数据库连接</li>
<li>建立共享/停止共享数据库连接</li>
</ul>
<h3 id="6-3、操作过程"><a href="#6-3、操作过程" class="headerlink" title="6.3、操作过程"></a>6.3、操作过程</h3><h4 id="1）建立数据库连接"><a href="#1）建立数据库连接" class="headerlink" title="1）建立数据库连接"></a>1）建立数据库连接</h4><p>数据库连接必须在转换工程或任务工程中才能创建，使用Ctrl+N快捷键，首先创建【demodb数据库连接】转换工程。</p>
<p>在【demodb数据库连接】转换工程中，单击【主对象树】选项卡，展开【转换】对象数（按钮表示收起状态，按钮表示展开状态），右键单击【demodb数据库连接】下的【DB连接】对象，弹出快捷菜单。如图所示：</p>
<p><img src="/img/kettle/kettle23.png" alt="kettle"> </p>
<h3 id="6-4、设置参数"><a href="#6-4、设置参数" class="headerlink" title="6.4、设置参数"></a>6.4、设置参数</h3><ul>
<li>单击【新建】选项，弹出创建【数据库连接】对话框。</li>
<li>数据库连接参数包含【一般】【高级】【选项】【连接池】和【集群】5类参数。</li>
<li>其中，【一般】参数是必填项，多数情况只需进行【一般】参数设置，即可完成创建数据库连接，其他四项是可选项。</li>
<li>由于【高级】【选项】【连接池】绝大多数情况下采用默认值，一般不需要再设置其参数，本篇教程主要介绍【一般】参数和【集群】参数的设置。</li>
</ul>
<p>1）【一般】参数</p>
<p>【一般】参数分为【连接名称】【连接类型】【连接方式】【设置】四部分参数设置。因为【连接类型】参数设置不同，【连接方式】【设置】参数设置也会有所不同，所以必须按照【连接类型】【连接方式】【设置】的顺序进行参数设置。</p>
<p>2）【集群】参数</p>
<p>指单个数据库连接能够连接抽取多个数据库的数据，单击【集群】参数项，进行【集群】参数设置。如图所示：</p>
<p><img src="/img/kettle/kettle24.png" alt="kettle"> </p>
<p>在【集群】参数设置中，勾选【使用集群】选项后，才能在【命名参数】表中设置集群参数。【分区ID】参数是指用不同的ID名称标识各个数据库，可以是英文字母、数字、中文等字符或组合。</p>
<p>参数设置完之后，单击【测试】按钮，弹出数据库连接测试是否成功的对话框。若正确，则显示正确连接到数据库信息；若错误，则显示错误连接到数据库的信息，需要重新设置正确的参数。</p>
<h2 id="七、Kettle-建立共享-停止共享数据库连接"><a href="#七、Kettle-建立共享-停止共享数据库连接" class="headerlink" title="七、Kettle 建立共享/停止共享数据库连接"></a>七、Kettle 建立共享/停止共享数据库连接</h2><hr>
<p>为了避免反复创建相同的数据库连接，在多个不同的转换工程或作业任务中共用相同的数据库，可以考虑建立共享的数据库连接。</p>
<h3 id="7-1、建立共享"><a href="#7-1、建立共享" class="headerlink" title="7.1、建立共享"></a>7.1、建立共享</h3><p>在建立好的数据库连接装换工程中，单击【主对象树】选项卡，展开【转换】对象树，单击&gt;按钮，展开【DB连接】对象，右键单击数据库连接的名称。</p>
<p>单击【共享】选项，数据库连接共享成功，其他转换工程或任务工程即可共享使用。需要注意的是，共享后的数据库连接名称为粗体字体显示。</p>
<h3 id="7-2、停止共享"><a href="#7-2、停止共享" class="headerlink" title="7.2、停止共享"></a>7.2、停止共享</h3><p>数据库连接既可以共享，也可以停止共享。</p>
<p>与共享操作类似，单击【主对象树】选项卡，在【转换】对象树中，单击&gt;按钮展开【DB连接】对象，右键单击显示为粗体字体的数据库连接名称，在弹出快捷菜单中单击【停止共享】选项，即可停止共享该数据库连接。</p>
<h2 id="八、Kettle-表输入"><a href="#八、Kettle-表输入" class="headerlink" title="八、Kettle 表输入"></a>八、Kettle 表输入</h2><hr>
<h3 id="8-1、任务描述"><a href="#8-1、任务描述" class="headerlink" title="8.1、任务描述"></a>8.1、任务描述</h3><p>数据表是指具有统一名称，并且类型、长度、格式等元素相同的数据集合，在数据库中，数据是以数据表的形式存储的。</p>
<p>表输入的作用是抽取数据库中的数据表，并获取表中的数据。</p>
<p>为方便查看和统计学生的数学考试分数，需要通过表输入抽取某年级某次考试的数据成绩。</p>
<h3 id="8-2、实现思路"><a href="#8-2、实现思路" class="headerlink" title="8.2、实现思路"></a>8.2、实现思路</h3><ul>
<li>建立【表输入】转换工程</li>
<li>设置【表输入】组件参数</li>
<li>预览数据</li>
</ul>
<h3 id="8-3、操作过程"><a href="#8-3、操作过程" class="headerlink" title="8.3、操作过程"></a>8.3、操作过程</h3><h4 id="1）建立表输入转换工程"><a href="#1）建立表输入转换工程" class="headerlink" title="1）建立表输入转换工程"></a>1）建立表输入转换工程</h4><p>在demodb数据库中的“数学成绩”表，字段说明如表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>字段名称</strong></th>
<th><strong>说明</strong></th>
<th><strong>字段名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>序号</strong></td>
<td>表示记录的顺序号</td>
<td>数学</td>
<td>表示数学考试分数</td>
</tr>
<tr>
<td><strong>学号</strong></td>
<td>表示学生在学校的唯一编号</td>
<td>考试时间</td>
<td>表示考试的日期和时间</td>
</tr>
</tbody>
</table>
</div>
<p>使用Ctrl+N快捷键，创建【表输入】转换工程，对所使用到的表进行数据库连接创建操作，并测试结果为成功。</p>
<p>在【表输入】转换工程中，单击【核心对象】选项卡，展开【输入】对象，选中【表输入】组件，并拖拽到右边工作区中。</p>
<p>双击【表输入】组件，弹出【表输入】对话框，如图所示。</p>
<p><img src="/img/kettle/kettle25.png" alt="kettle"> </p>
<h4 id="2）设置参数"><a href="#2）设置参数" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>在【表输入】对话框中，设置有关参数，获取MySQL的demodb数据库中的“数学成绩”表，步骤如下：</p>
<p>1）设置组件名称。设置【步骤名称】为默认值“表输入”。</p>
<p>2）设置数据库连接。单击【数据库连接】下拉框，选择所创建的链接。</p>
<p>浏览数据表。单击【获得SQL查询语句…】按钮，弹出【数据库浏览器】对话框，单击按钮展开数据库，再单击俺就展开【表】数据表，显示所需要浏览的表（本教程以demodbConn数据库中的数学成绩表为例）。选择【数学成绩】表。</p>
<p><img src="/img/kettle/kettle26.png" alt="kettle"> </p>
<p>查看选中的数据表信息。单击【动作】按钮，弹出快捷菜单选项，可以分别预览数据库表的数据、记录数、表结构、生成SQL语句、裁剪表和查看表的有关信息等，如图所示。</p>
<p><img src="/img/kettle/kettle27.png" alt="kettle"> </p>
<p>确认获取数据表的SQL查询语句。单击【确定】按钮，弹出【问题?】对话框，显示【你想在SQL里面包含字段名吗?】提示信息，如图所示。</p>
<p><img src="/img/kettle/kettle28.png" alt="kettle"> </p>
<p>单击【否】按钮，在【SQL】表达式参数中获取的是简单的SQL查询语句，如图所示，其他参数采用默认值，此时完成【表输入】组件参数的设置。</p>
<p><img src="/img/kettle/kettle29.png" alt="kettle"> </p>
<h3 id="8-4、预览结果数据"><a href="#8-4、预览结果数据" class="headerlink" title="8.4、预览结果数据"></a>8.4、预览结果数据</h3><p>单击【预览】按钮，在弹出【输入预览记录数量】对话框中，预览记录数量采用默认值，单击【确认】按钮。弹出【预览数据】对话框，展示表输入的数据，如图所示。</p>
<p><img src="/img/kettle/kettle30.png" alt="kettle"> </p>
<h2 id="九、Kettle-Excel输入"><a href="#九、Kettle-Excel输入" class="headerlink" title="九、Kettle Excel输入"></a>九、Kettle Excel输入</h2><hr>
<h3 id="9-1、任务描述"><a href="#9-1、任务描述" class="headerlink" title="9.1、任务描述"></a>9.1、任务描述</h3><p>Excel采用表格的形式，数据展示直观，操作方便。</p>
<p>与文本文件不同，Excel文件中采用工作表存储数据，一个文件有多张不同名称的工作表，分别存放相同字段或不同字段的数据。</p>
<p>为方便浏览表中的明细数据，需要通过Excel输入抽取相应的数据。</p>
<h3 id="9-2、实现思路"><a href="#9-2、实现思路" class="headerlink" title="9.2、实现思路"></a>9.2、实现思路</h3><ul>
<li>建立【Excel输入】转换工程。</li>
<li>设置【Excel输入】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="9-3、操作过程"><a href="#9-3、操作过程" class="headerlink" title="9.3、操作过程"></a>9.3、操作过程</h3><h4 id="1）建立Excel输入转换工程"><a href="#1）建立Excel输入转换工程" class="headerlink" title="1）建立Excel输入转换工程"></a>1）建立Excel输入转换工程</h4><p>本教程以“物理成绩.xls”文件为例，字段说明如下表所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>字段名称</strong></th>
<th><strong>说明</strong></th>
<th><strong>字段名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>序号</strong></td>
<td>表示记录的顺序号</td>
<td>物理</td>
<td>表示物理考试分数</td>
</tr>
<tr>
<td><strong>学号</strong></td>
<td>表示学生在学校的唯一编号</td>
<td>考试时间</td>
<td>表示考试的日期和时间</td>
</tr>
</tbody>
</table>
</div>
<p>使用Ctrl+N快捷键，创建【Excel输入】转换工程，单击【核心对象】选项卡，展开【输入】对象，选中【Excel输入】组件，并拖拽到右边工作区中，如图所示。</p>
<p><img src="/img/kettle/kettle31.png" alt="kettle"> </p>
<h4 id="2）设置参数-1"><a href="#2）设置参数-1" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【Excel输入】组件，弹出【Excel输入】对话框，其中显示默认的【文件】对话框，如图所示。</p>
<p><img src="/img/kettle/kettle32.png" alt="kettle"> </p>
<p>在【Excel输入】对话框中，包含组件的基础参数，以及【文件】【工作表】【内容】【错误处理】【字段】【其他输出字段】6个选项卡的参数。</p>
<p>在组件的基础参数中，【步骤名称】参数表示【Excel输入】组件名称，在单个转换工程中，名称必须唯一，采用默认值“Excel输入”。</p>
<p>【文件】【工作表】【字段】选项卡的参数是必填项（没有设置参数时，选项卡名称签名会显示“！”，表示是必填项，设置参数后“！”会消失），并且必须按照【文件】【工作表】【字段】选项卡的顺序设置，其他为可选项。</p>
<ul>
<li><strong>【文件】选项卡参数</strong></li>
</ul>
<p>在【文件】选项卡中，设置参数，并导入“物理成绩.xls”文件，步骤如下：</p>
<p>a）浏览导入Excel文件。单击【浏览(B)…】按钮，在计算机上浏览并导入“物理成绩.xls”文件，如图所示。</p>
<p><img src="/img/kettle/kettle33.png" alt="kettle"> </p>
<p>b）添加并编辑Excel文件。单击【增加】，将浏览导入至【文件或目录】输入框中的“E:\data\物理成绩.xls”文件，添加至【选中的文件】表中，如图所示。</p>
<p><img src="/img/kettle/kettle34.png" alt="kettle"> </p>
<p>如果选中的文件有问题，那么单击【删除】或【编辑】按钮，可对选中的Excel文件进行编辑。其中，单击【选中的文件】表的行号，再单击【删除】按钮，即可删除选中所在行的文件。</p>
<p>c）查看被选中的文件名称.。单击【显示文件名称…】按钮，弹出【文件读取】对话框，查看被选中读取的文件，如图所示。</p>
<p><img src="/img/kettle/kettle35.png" alt="kettle"> </p>
<p>重复上述 a）~ c）个步骤可添加多个Excel文件，并查看读取的文件名称。</p>
<p>另外，如果需要导入同一个目录下的多份名称类似的文件，如导入同一个目录下名称分别为“物理成绩.xls”“物理成绩1.xls”和“物理成绩2.xls”的文件，可以使用通配符的方式导入。</p>
<p>具体操作为，在【选中的文件】参数表中，在【文件或目录】输入框中键入“E:\data”，在【通配符号】输入框中输入“物理成绩*.\xls”，可以一次性读入这3个文件，如图所示。</p>
<p><img src="/img/kettle/kettle36.png" alt="kettle"> </p>
<ul>
<li><strong>【工作表】选项卡参数</strong></li>
</ul>
<p>单击【工作表】选项卡，如图所示。</p>
<p><img src="/img/kettle/kettle37.png" alt="kettle"> </p>
<p>在【要读取的工作表列表】表中设置工作表参数，获取导入的Excel文件的工作表，【工作表】选项卡参数的说明如表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>参数名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>工作表名称</strong></td>
<td>表示Excel文件的工作表名称。可以是一个Excel文件、多个工作表，也可以是多个Excel文件、多个工作表。不同的文件，工作表名称可以相同。默认值为空。</td>
</tr>
<tr>
<td><strong>起始行</strong></td>
<td>表示要读取的工作表中的开始行，行号是从0开始。默认值为空。</td>
</tr>
<tr>
<td><strong>起始列</strong></td>
<td>表示要读取的工作表中的开始列，列号是从0开始。默认值为空。</td>
</tr>
</tbody>
</table>
</div>
<p>如果导入的Excel文件中的每个工作表的字段结构都相同，那么在【要读取的工作表列表】表中的第1行，不设置任何工作表名称（即【工作表名称】输入栏留空），只需设置第1行的【起始行】和【起始列】输入栏参数，这样的设置是读取所有的工作表，即第1行</p>
<p>将用于所有工作表。</p>
<p>在【工作表】选项卡中，设置导入的Excel文件的工作表参数，步骤如下：</p>
<p>a）获取选中文件的工作表。单击【获取工作表名称…】按钮，弹出【输入列表】对话框，左边【可用项目】列表列出选中文件的所有工作表，如“物理成绩.xls”文件的“Sheet1”工作表，而右边【你的选择】列表列出被选中的工作表，如图所示。</p>
<p><img src="/img/kettle/kettle38.png" alt="kettle"> </p>
<p>b）选择工作表。在【输入列表】对话框中，单击中间的【&gt;】【&gt;&gt;】【&lt;】【&lt;&lt;】按钮，可以在左、右列表中，选中或移除工作表，有关按钮说明如表所示</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>按钮</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>&gt;</strong></td>
<td>表示右移按钮，选择左边【可用项目】列表中一个工作表，移到右边【你的选择】列表中。</td>
</tr>
<tr>
<td><strong>&lt;</strong></td>
<td>表示左移按钮，将右边【你的选择】列表中的一个工作表移回到左边【可用项目】列表中，与【&gt;】按钮操作相反。</td>
</tr>
<tr>
<td><strong>&gt;&gt;</strong></td>
<td>表示右移批处理按钮，将左边【可用项目】列表中的所有工作表，移到右边【你的选择】列表中。</td>
</tr>
<tr>
<td><strong>&lt;&lt;</strong></td>
<td>表示左移批处理按钮，将右边【你的选择】列表中的所有工作表，移回到左边【可用项目】列表中，与【&gt;&gt;】按钮操作相反。</td>
</tr>
</tbody>
</table>
</div>
<p>在【输入列表】对话框中，将左边【可用项目】工作表“Sheet1”选中移到右边【你的选择】表中。</p>
<p>c）设置选中的工作表参数。单击【确定】按钮，将【你的选择】列表选中的“Sheet1”工作表添加至【要读取的工作表列表】表中进行参数设置，【起始行】和【起始列】参数都设置为“0”，此时完成【工作表】选项卡参数的设置，如图所示。</p>
<p><img src="/img/kettle/kettle39.png" alt="kettle"> </p>
<ul>
<li><strong>【字段】选项卡参数</strong></li>
</ul>
<p>单击【字段】选项卡如图所示。</p>
<p><img src="/img/kettle/kettle40.png" alt="kettle"> </p>
<p>在【字段】选项卡中，设置“物理成绩.xls”文件中字段的参数，步骤如下。</p>
<p>a）获取字段。单击【获取头部数据的字段…】按钮，添加字段到【字段】表中设置字段参数，如图所示。</p>
<p><img src="/img/kettle/kettle41.png" alt="kettle"> </p>
<p>b）设置字段参数。对字段参数进行设置，如图所示，此时完成【字段】选项卡参数的设置。</p>
<p><img src="/img/kettle/kettle42.png" alt="kettle"> </p>
<p>需要说明的是，如果有些Excel文件的文件头部没有字段数据，那么系统会自动生成默认的字段名称，也可以重新编辑字段名称，字段的类型、长度等，字段的属性也可以进行编辑。</p>
<p>当获取字段后，【Excel输入】对话框下方【预览记录】按键的字体显示为黑色，说明此时可以预览数据。</p>
<ul>
<li><strong>【内容】选项卡参数</strong></li>
</ul>
<p>单击【内容】选项卡，如图所示。</p>
<p><img src="/img/kettle/kettle43.png" alt="kettle"> </p>
<p>对读取Excel文件内容进行参数设置，一般按照缺省值配置，参数的说明如表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>参数名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>头部</td>
<td>表示对选中的工作表是否包含表头行。默认值为√。</td>
</tr>
<tr>
<td>非空记录</td>
<td>表示是否在输出中不出现空行（记录）。默认值为√。</td>
</tr>
<tr>
<td>停在空记录</td>
<td>表示当读取记录遇到空行时，选择是否停止读取文件的当前工作表。默认值为空。</td>
</tr>
<tr>
<td>限制</td>
<td>表示限制生成的记录数量。当设置为0时，结果不受限制。默认值为0.</td>
</tr>
<tr>
<td>编码</td>
<td>表示读入的文本文件编码。第一次使用时，Kettle会在系统中搜索可用的编码。使用Unicode的，请指定UTF-8或UTF-16。默认值为Kettle系统的编码。</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><strong>【错误处理】选项卡参数</strong></li>
</ul>
<p>单击【错误处理】选项卡，如图所示，可对获取Excel文件时产生的错误处理参数进行设置，检查和定位错误位置，一般按照缺省值配置。</p>
<p><img src="/img/kettle/kettle44.png" alt="kettle"> </p>
<ul>
<li><strong>【其他输出字段】选项卡参数</strong></li>
</ul>
<p>单击【其他输出字段】选项卡，如图所示。</p>
<p><img src="/img/kettle/kettle45.png" alt="kettle"> </p>
<p>对Excel文件的其他输出字段参数进行设置，用于指定处理文件的附加信息，默认值为空，一般按照缺省值配置，有关参数的说明如表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>字段参数</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>文件名称字段</td>
<td>表示指定完整的文件名称和扩展名的字段。默认值为空。</td>
</tr>
<tr>
<td>工作表名称字段</td>
<td>表示指定要使用的工作表名称的字段。默认值为空。</td>
</tr>
<tr>
<td>表单的行号列</td>
<td>表示指定要使用的当前工作表行号字段。默认值为空。</td>
</tr>
<tr>
<td>行号列</td>
<td>表示指定写入行数的字段。默认值为空。</td>
</tr>
<tr>
<td>文件名字段</td>
<td>表示指定文件名但没有路径信息、但有扩展名的字段。默认值为空。</td>
</tr>
<tr>
<td>扩展字段</td>
<td>表示指定文件名扩展名的字段。默认值为空。</td>
</tr>
<tr>
<td>路径字段</td>
<td>表示指定以操作系统格式包含路径的字段。默认值为空。</td>
</tr>
<tr>
<td>文件大小字段</td>
<td>表示指定文件数据大小的字段。默认值为空。</td>
</tr>
<tr>
<td>是否为文件隐藏字段</td>
<td>表示文件是否为隐藏的字段（布尔值）。默认值为空。</td>
</tr>
<tr>
<td>Uri字段</td>
<td>表示指定包含Uri的字段。默认值为空。</td>
</tr>
<tr>
<td>Root Uri字段</td>
<td>表示指定仅包含Uri的根部分的字段。默认值为空。</td>
</tr>
</tbody>
</table>
</div>
<p>设置好字段参数后，单击【预览记录】按钮，弹出【预览数据数量】对话框，要预览的行数采用默认值，并单击【确定】按钮。</p>
<p>弹出【预览数据】对话框，展示Excel输入的数据，如图所示。</p>
<p><img src="/img/kettle/kettle46.png" alt="kettle"> </p>
<h2 id="十、Kettle-生成记录"><a href="#十、Kettle-生成记录" class="headerlink" title="十、Kettle 生成记录"></a>十、Kettle 生成记录</h2><hr>
<h3 id="10-1、任务描述"><a href="#10-1、任务描述" class="headerlink" title="10.1、任务描述"></a>10.1、任务描述</h3><p>在数据统计中，往往要生成固定行数和列数的记录，用于存放统计总数。</p>
<p>为方便记录1-12月份商品的销售总额，需要通过生成记录，生成一个月销售总额的数据表，包括商品名称和销售总额两个字段，记录销售的商品和当月商品统计销售总额，共生成12条记录。</p>
<h3 id="10-2、实现思路"><a href="#10-2、实现思路" class="headerlink" title="10.2、实现思路"></a>10.2、实现思路</h3><ul>
<li>建立【生成记录】转换工程。</li>
<li>设置【生成记录】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="10-3、操作过程"><a href="#10-3、操作过程" class="headerlink" title="10.3、操作过程"></a>10.3、操作过程</h3><h4 id="1、建立【生成记录】转换工程"><a href="#1、建立【生成记录】转换工程" class="headerlink" title="1、建立【生成记录】转换工程"></a>1、建立【生成记录】转换工程</h4><p>使用ctrl+N快捷键，创建【生成记录】转换工程，单击【核心对象】，展开【输入】对象，选中【生成记录】组件，并拖拽到右边工作区中，如图所示：</p>
<p><img src="/img/kettle/kettle47.png" alt="kettle"> </p>
<h4 id="2、设置参数"><a href="#2、设置参数" class="headerlink" title="2、设置参数"></a>2、设置参数</h4><p>双击【生成记录】组件，弹出创建【生成记录】对话框，如图所示：</p>
<p><img src="/img/kettle/kettle48.png" alt="kettle"> </p>
<p>该组件参数包含两种，分别是基础参数：步骤名称、限制、“Never stop generating rows”和【字段】：名称、类型、格式、长度、精度、货币类型、小数、分组、值、设为空串？。</p>
<p>根据需要设置好相关参数后，生成12条记录的商品销售总额表，步骤如下：</p>
<p>1）确定组件名称。【步骤名称】参数保留默认值。</p>
<p>2）确定表的记录数。【限制】参数设置为“12”。</p>
<p>3）设置字段参数。在【字段】表中，对个字段的参数进行设置，如图所示，此时完成【生成记录】组件参数的设置。</p>
<p><img src="/img/kettle/kettle49.png" alt="kettle"> </p>
<h4 id="3、预览数据结果"><a href="#3、预览数据结果" class="headerlink" title="3、预览数据结果"></a>3、预览数据结果</h4><p>单击【预览(P)】按钮，弹出【输入预览记录数】对话框，预览记录数采用默认值，单击【确定】按钮。弹出【预览数据】对话框，展示生成记录的数据，如图所示：</p>
<p><img src="/img/kettle/kettle50.png" alt="kettle"> </p>
<h2 id="十一、Kettle-生成随机数"><a href="#十一、Kettle-生成随机数" class="headerlink" title="十一、Kettle 生成随机数"></a>十一、Kettle 生成随机数</h2><hr>
<h3 id="11-1、任务描述"><a href="#11-1、任务描述" class="headerlink" title="11.1、任务描述"></a>11.1、任务描述</h3><p>在工作中，往往需要生成随机数验证码，作为数据或文件的验证码。</p>
<p>为方便给授权用户验证文件，需要通过生成随机数，生成一组MD5信息授权码，作为数据文件的认证授权码。</p>
<h3 id="11-2、实现思路"><a href="#11-2、实现思路" class="headerlink" title="11.2、实现思路"></a>11.2、实现思路</h3><ul>
<li>建立【生成随机数】转换工程</li>
<li>设置【生成随机数】组件参数</li>
<li>预览结果参数</li>
</ul>
<h3 id="11-3、操作过程"><a href="#11-3、操作过程" class="headerlink" title="11.3、操作过程"></a>11.3、操作过程</h3><h4 id="1、简历生成随机数转换工程"><a href="#1、简历生成随机数转换工程" class="headerlink" title="1、简历生成随机数转换工程"></a>1、简历生成随机数转换工程</h4><p>使用ctrl+N快捷键，创建【生成随机数】转换工程，单击【核心对象】，展开【输入】对象，选中【生成随机数】组件，并拖拽到右边工作区中，如图所示：</p>
<p><img src="/img/kettle/kettle51.png" alt="kettle"> </p>
<h4 id="2、设置参数-1"><a href="#2、设置参数-1" class="headerlink" title="2、设置参数"></a>2、设置参数</h4><p>双击【生成随机数】组件，弹出【生成随机值】对话框，如图所示：</p>
<p><img src="/img/kettle/kettle52.png" alt="kettle"> </p>
<p>【生成随机数】组件的参数，包含组件的基础参数和【字段】表参数。</p>
<p>在【生成随机值】对话框中，设置参数，随机生成一组MD5信息授权码，步骤如下：</p>
<p>1）确定组件名称。【步骤名称】参数保留默认值“生成随机值”。</p>
<p>2）设置字段参数。在【字段】表中第1行，设置字段名称和类型。</p>
<p>①点击【名称】参数输入框，键盘键入“授权码”。</p>
<p>②单击【类型】参数输入框，弹出【选择数据类型】对话框，选择【Random Message Authentication Code(HmacMD5)】类型，如图所示。</p>
<p><img src="/img/kettle/kettle53.png" alt="kettle"> </p>
<h4 id="3、预览结果数据"><a href="#3、预览结果数据" class="headerlink" title="3、预览结果数据"></a>3、预览结果数据</h4><p>在【生成随机数】转换工程中，单击【生成随机数】组件，再从工作区上方调出【转换调试窗口】对话框，展示生成随机数的数据，如图所示。</p>
<p><img src="/img/kettle/kettle54.png" alt="kettle"> </p>
<p>单击【快速启动】按钮，弹出【预览数据】对话框，展示生成随机数的授权码数据，如图所示。</p>
<p><img src="/img/kettle/kettle55.png" alt="kettle"> </p>
<h2 id="十二、Kettle-获取系统信息"><a href="#十二、Kettle-获取系统信息" class="headerlink" title="十二、Kettle 获取系统信息"></a>十二、Kettle 获取系统信息</h2><hr>
<h3 id="12-1、相关概念"><a href="#12-1、相关概念" class="headerlink" title="12.1、相关概念"></a>12.1、相关概念</h3><p>系统信息是指Kettle系统环境的信息，包括了计算机系统的日期、星期等时间类型信息，计算机名称、IP地址等设备信息，Kettle系统转换过程中的信息等。</p>
<p>为方便读取计算机上到本月最后一天的交易数据文件，需要通过获取系统信息，获得当月最后一天的时间以及当前计算机名称与IP地址等系统信息。</p>
<h3 id="12-2、实现思路"><a href="#12-2、实现思路" class="headerlink" title="12.2、实现思路"></a>12.2、实现思路</h3><ul>
<li>建立【获取系统信息】转换工程。</li>
<li>设置【获取系统信息】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="12-3、操作过程"><a href="#12-3、操作过程" class="headerlink" title="12.3、操作过程"></a>12.3、操作过程</h3><h4 id="1）建立获取系统信息转换工程"><a href="#1）建立获取系统信息转换工程" class="headerlink" title="1）建立获取系统信息转换工程"></a>1）建立获取系统信息转换工程</h4><p>使用Ctrl+N快捷键，创建【获取系统信息】转换工程，单击【核心对象】选项卡，展开【输入】对象，选中【获取系统信息】组件，并拖拽到右边工作区中，如图所示：</p>
<p><img src="/img/kettle/kettle56.png" alt="kettle"> </p>
<h4 id="2）设置参数-2"><a href="#2）设置参数-2" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【获取系统信息】组件，弹出【获取系统信息】对话框，如图所示：</p>
<p><img src="/img/kettle/kettle57.png" alt="kettle"> </p>
<p>【获取系统信息】组件的参数包含组件的基础参数，以及【字段】表参数。</p>
<p>在【获取系统信息】对话框中，设置参数，获取当月最后一天的时间，以及当前的计算机名称与IP地址等系统信息，步骤如下：</p>
<p>1）确定组件名称。【步骤名称】参数保留默认值。</p>
<p>2）设置字段参数。在【字段】表中，设置字段参数。</p>
<p>①设置第1行参数。【名称】参数设置为“当月最后一天”。单击【类型】输入框，弹出【选择信息类型】对话框。选择“本月最后一天的23::59:59”类型，如图所示，并单击【确定】按钮。</p>
<p><img src="/img/kettle/kettle58.png" alt="kettle"> </p>
<p>②设置第2行参数。与设置第1行参数类似，第2行参数的【名称】参数设置为“计算机名称”，【类型】参数设置为“主机名”。</p>
<p>③设置第3行参数。与设置第1行参数类似，第3行参数的【名称】参数设置为“IP地址”，【类型】参数设置为“IP地址”，如图所示，此时已完成【获取系统信息】组件的参数设置。</p>
<p><img src="/img/kettle/kettle59.png" alt="kettle"> </p>
<h4 id="3）预览结果数据"><a href="#3）预览结果数据" class="headerlink" title="3）预览结果数据"></a>3）预览结果数据</h4><p>单击【浏览记录】按钮，弹出【Enter preview size】对话框，预览记录数采用默认值，单击【确定】按钮。弹出【预览数据】对话框，展示获取系统信息的数据，如图所示。</p>
<p><img src="/img/kettle/kettle60.png" alt="kettle"> </p>
<h2 id="十三、Kettle-排序记录"><a href="#十三、Kettle-排序记录" class="headerlink" title="十三、Kettle 排序记录"></a>十三、Kettle 排序记录</h2><hr>
<h3 id="13-1、任务描述"><a href="#13-1、任务描述" class="headerlink" title="13.1、任务描述"></a>13.1、任务描述</h3><p>排序是对数据中的无序记录，按照自然或客观规律，根据关键字段大小递增或递减的次序，对记录重新排列的过程。</p>
<p>为了得出学生的成绩排名，需要对“2019年11月月考数学成绩.xls”文件，使用【排序记录】组件，对学生的成绩从低到高排序。</p>
<h3 id="13-2、实现思路"><a href="#13-2、实现思路" class="headerlink" title="13.2、实现思路"></a>13.2、实现思路</h3><ul>
<li>建立【排序记录】转换工程。</li>
<li>设置【排序记录】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="13-3、操作过程"><a href="#13-3、操作过程" class="headerlink" title="13.3、操作过程"></a>13.3、操作过程</h3><h4 id="1）建立排序记录转换工程"><a href="#1）建立排序记录转换工程" class="headerlink" title="1）建立排序记录转换工程"></a>1）建立排序记录转换工程</h4><p>使用Ctrl+N快捷键，创建【排序记录】转换工程，接着创建【Excel输入】组件，设置参数，导入““2019年11月月考数学成绩.xls”文件，预览数据，如图所示，其中“数学”字段数据处于无序状态。</p>
<p><img src="/img/kettle/kettle61.png" alt="kettle"> </p>
<p>在【排序记录】转换工程中，单击【核心对象】选项卡，展开【转换】对象，选中【排序记录】组件，并拖拽至右边工作区中。由【Excel输入】组件指向【排序记录】组件，建立节点连接，如图所示：</p>
<p><img src="/img/kettle/kettle62.png" alt="kettle"> </p>
<h4 id="2）设置参数-3"><a href="#2）设置参数-3" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【排序记录】组件，弹出【排序记录】对话框，如图所示：</p>
<p><img src="/img/kettle/kettle63.png" alt="kettle"> </p>
<p>【排序记录】组件的参数包含了组件的基础参数和【字段】表参数，有关参数的说明如表所示。其中，【字段】表参数是设置参与排序的字段参数，可以对多个字段设置参数。</p>
<p>在【排序目录】对话框中，设置参数，将“数学”字段的数据按照从低到高进行排序，步骤如下：</p>
<p>1）确定组件名称。【步骤名称】参数保留默认值“排序记录”。</p>
<p>2）确定排序目录。【排序目录】参数保留默认值“%%java.io.tmpdir%%”。</p>
<p>3）设置排序字段参数。在【字段】表中，对各字段的参数进行设置，此时完成【排序目录】组件参数的设置，如图所示：</p>
<p><img src="/img/kettle/kettle64.png" alt="kettle"> </p>
<h4 id="3）预览结果数据-1"><a href="#3）预览结果数据-1" class="headerlink" title="3）预览结果数据"></a>3）预览结果数据</h4><p>在【排序记录】排序工程中，单击【排序记录】组件，再点击预览数据，展示排序后的数据，如图所示：</p>
<p><img src="/img/kettle/kettle65.png" alt="kettle"> </p>
<h2 id="十四、Kettle-去除重复记录"><a href="#十四、Kettle-去除重复记录" class="headerlink" title="十四、Kettle 去除重复记录"></a>十四、Kettle 去除重复记录</h2><hr>
<h3 id="14-1、任务描述"><a href="#14-1、任务描述" class="headerlink" title="14.1、任务描述"></a>14.1、任务描述</h3><p>由于输入或其他错误的原因，数据文件中可能出现两条或多条数据完全相同的记录，这些相同的记录成为重复记录。</p>
<p>重复的记录属于“脏数据”，会造成数据统计和分析不正确，必须清洗掉重复记录。</p>
<p>由于在“期考成绩.xls”文件中，发现存在序号不同，但是学号、各科考试成绩完全相同的记录，所以需要使用【去除重复记录】组件，去除这些重复的数据。</p>
<h3 id="14-2、实现思路"><a href="#14-2、实现思路" class="headerlink" title="14.2、实现思路"></a>14.2、实现思路</h3><ul>
<li>建立【去除重复记录】转换工程。</li>
<li>设置【去除重复记录】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="14-3、操作过程"><a href="#14-3、操作过程" class="headerlink" title="14.3、操作过程"></a>14.3、操作过程</h3><h4 id="1）建立去除重复记录转换工程"><a href="#1）建立去除重复记录转换工程" class="headerlink" title="1）建立去除重复记录转换工程"></a>1）建立去除重复记录转换工程</h4><ul>
<li>在去除重复记录（简称“去重”）之前，必须使用关键字段对数据记录进行排序，确定哪些记录属于重复记录。</li>
<li>使用Ctrl+N快捷键，创建【去除重复记录】转换工程。接着创建【Excel输入】组件，设置参数，导入“期考成绩.xls”文件。</li>
<li>接着创建【排序记录】组件，并由【Excel输入】组件指向【排序记录】组件，简历节点连接，如图所示：</li>
</ul>
<p><img src="/img/kettle/kettle66.png" alt="kettle"> </p>
<ul>
<li><p>双击【排序记录】组件，对“学号”字段按照升序进行排序后预览数据，如图所示，除了“序号”字段数据外，“学号”分贝为“201709023”“201709028”的数据各有两条记录，并且对应的“语文”“数学”等考试科目和“创建时间”的数据也相同。</p>
<p><img src="/img/kettle/kettle67.png" alt="kettle"> </p>
</li>
</ul>
<ul>
<li>在【去除重复记录】转换工程中，单击【核心对象】选项卡，展开【转换】对象，选中【去除重复记录】组件，并拖拽至右边工作区中，并由【排序记录】组件指向【去除重复记录】组件，建立节点连接，如图所示：</li>
</ul>
<p><img src="/img/kettle/kettle68.png" alt="kettle"> </p>
<h4 id="2）设置参数-4"><a href="#2）设置参数-4" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【去除重复记录】组件，弹出【去除重复记录】对话框，如图所示：</p>
<p><img src="/img/kettle/kettle69.png" alt="kettle"> </p>
<p>【去除重复记录】组件的参数包含了组件的基础参数和【用来比较的字段】表参数。</p>
<p>在【去除重复记录】对话框中，设置参数，去除学号相同的记录，步骤如下：</p>
<p>1）确定组件名称。【步骤名称】参数保留默认值“去除重复记录”。</p>
<p>2）确定计数器字段。【增加计数器到输出】设置为“√”，【计数器字段】设置为“重复行数”。</p>
<p>3）确定错误描述。【重定向重复记录】设置为“√”，【错误描述】设置为“重复输入”。</p>
<p>4）设置用来比较字段参数，在【用来比较的字段】表中，【字段名称】设置为“学号”，【忽略大小写】设置为“N”，此时完成【去除重复记录】组件参数的设置，如图所示。</p>
<p><img src="/img/kettle/kettle70.png" alt="kettle"> </p>
<h4 id="3）预览结果数据-2"><a href="#3）预览结果数据-2" class="headerlink" title="3）预览结果数据"></a>3）预览结果数据</h4><p>在【去除重复记录】转换工程中，单击【去除重复记录】组件，点击预览去除重复记录后的数据，如图所示：</p>
<p><img src="/img/kettle/kettle71.png" alt="kettle"> </p>
<h2 id="十五、Kettle-替换NULL值"><a href="#十五、Kettle-替换NULL值" class="headerlink" title="十五、Kettle 替换NULL值"></a>十五、Kettle 替换NULL值</h2><hr>
<h3 id="15-1、任务描述"><a href="#15-1、任务描述" class="headerlink" title="15.1、任务描述"></a>15.1、任务描述</h3><p>在Kettle转换过程中，默认情况下，会将控制当做NULL值处理。如果数据类型字段出现NULL值，那么在计算时就会出现错误。</p>
<p>在“2019年11月月考英语成绩.xls”文件中，学号为“201709007”的同学没有参加考试，根据规定高考时分数将按零分处理，需要使用【替换NULL值】组件，使用“0”替换该同学的英语考试分数。</p>
<h3 id="15-2、实现思路"><a href="#15-2、实现思路" class="headerlink" title="15.2、实现思路"></a>15.2、实现思路</h3><p>1）建立【替换NULL值】转换工程。</p>
<p>2）设置【替换NULL】组件参数</p>
<p>3）预览结果数据。</p>
<h3 id="15-3、操作过程"><a href="#15-3、操作过程" class="headerlink" title="15.3、操作过程"></a>15.3、操作过程</h3><h4 id="1）建立替换NULL值转换工程"><a href="#1）建立替换NULL值转换工程" class="headerlink" title="1）建立替换NULL值转换工程"></a>1）建立替换NULL值转换工程</h4><p>使用Ctrl+N快捷键，创建【替换NULL值】转换工程。接着创建【Excel输入】组件，设置参数，导入“2019年11月月考英语成绩.xls”文件，预览数据，“学号”字段数据为“201709007”所对应的“英语”字段数据为“<null>”即（NULL），如图所示：</p>
<p><img src="/img/kettle/kettle72.png" alt="kettle"> </p>
<p>在【替换NULL值】转换工程中，单击【核心对象】选项卡，展开【应用】对象，选中【替换NULL值】组件，并拖拽至右边工作区中。由【Excel输入】组件指向【替换NULL值】组件，建立节点连接，如图所示：</p>
<p><img src="/img/kettle/kettle73.png" alt="kettle"> </p>
<h4 id="2）设置参数-5"><a href="#2）设置参数-5" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【替换NULL值】组件，弹出【替换NULL值】对话框，如图所示：</p>
<p><img src="/img/kettle/kettle74.png" alt="kettle"> </p>
<p>【替换NULL值】组件的参数包含了组件的基础参数和【替换所有字段的null值】【选择字段】【选择值类型】3种方式设置的参数，每种方式有多个不同的参数，有关参数的说明如表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>基础参数名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>作业名称</strong></td>
<td>表示【替换NULL值】组件名称，在单个转换工程中，名称必须唯一，默认值是【替换NULL值】组件名称。</td>
</tr>
<tr>
<td><strong>选择字段</strong></td>
<td>表示对所有记录的、指定字段的NULL值进行值替换的方式。默认值为空。</td>
</tr>
<tr>
<td><strong>选择值类型</strong></td>
<td>表示对所有记录、指定的数据类型的NULL值进行替换的方式。默认值为空。</td>
</tr>
</tbody>
</table>
</div>
<p>下图这3种方式只能三选一，默认是【替换所有字段的null值】方式，勾选【选择字段】参数后，通过【字段】表设置具体参数；勾选【选择值类型】参数后，通过【值类型】表设置具体参数。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>参数名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>替换所有字段的NULL值</strong></td>
<td>表示对所有记录、所有字段的NULL值进行替换方式，默认的替换方式。具体如下：1）值替换为：表示用来替换NULL的值，默认值为空。2）设置空字符串：表示是否设置空字符串，默认值为空。3）掩码（日期）：表示日期字段的掩码格式，默认值为空。</td>
</tr>
<tr>
<td><strong>字段</strong></td>
<td>表示勾选【选择字段】参数后，使用【字段】表设置参数，具体如下：1）字段：表示输入流的字段名称，单击下拉框选择设置。2）值替换为：表示要替换NULL的值。3）转换掩码（日期）：表示日期字段的掩码格式，默认值为空。4）设置空字符串：表示是否设置空字符串，选项有：是、否，默认值为空。</td>
</tr>
<tr>
<td><strong>值类型</strong></td>
<td>表示勾选【选择值类型】参数后，使用【值类型】表设置参数，具体如下：1）字段：表示输入流的字段名称，单击下拉框选择设置。2）值替换为：表示要替换NULL的值。3）转换掩码（日期）：表示日期字段的掩码格式，默认值为空。4）设置空字符串：表示是否设置空字符串，选项有：是、否，默认值为空。</td>
</tr>
</tbody>
</table>
</div>
<p>在【替换NULL值】对话框中，设置参数，用“0”替换“英语”字段的数据“null”，步骤如下：</p>
<p>1）确定组件名称。【步骤名称】参数保留默认值“替换NULL值”。</p>
<p>2）选择【选择字段】方式设置字段参数。【选择字段】设置为“√”，并在【字段】表中，对字段的参数进行设置。此时完成【替换NULL值】组件参数的设置，如图所示。</p>
<p><img src="/img/kettle/kettle75.png" alt="kettle"> </p>
<h4 id="3）预览结果数据-3"><a href="#3）预览结果数据-3" class="headerlink" title="3）预览结果数据"></a>3）预览结果数据</h4><p>在【替换NULL值】转换工程中，单击【替换NULL值】组件，预览替换NULL值后的数据，如图所示：</p>
<p><img src="/img/kettle/kettle76.png" alt="kettle"> </p>
<h2 id="十六、Kettle-过滤记录"><a href="#十六、Kettle-过滤记录" class="headerlink" title="十六、Kettle 过滤记录"></a>十六、Kettle 过滤记录</h2><hr>
<h3 id="16-1、任务描述"><a href="#16-1、任务描述" class="headerlink" title="16.1、任务描述"></a>16.1、任务描述</h3><p>在数据处理时，往往要对数据所述类别、区域和时间等进行限制，将限制范围外的数据过滤掉。</p>
<p>为了统计2班的考试人数和成绩，需要对“2019年10月年级月考数学成绩.xls”文件，使用【过滤记录】组件，过滤掉不是2班的数据。</p>
<h3 id="16-2、实现思路"><a href="#16-2、实现思路" class="headerlink" title="16.2、实现思路"></a>16.2、实现思路</h3><ul>
<li>建立【过滤记录】转换工程。</li>
<li>设置【过滤记录】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="16-3、操作过程"><a href="#16-3、操作过程" class="headerlink" title="16.3、操作过程"></a>16.3、操作过程</h3><h4 id="1）建立过滤记录转换工程"><a href="#1）建立过滤记录转换工程" class="headerlink" title="1）建立过滤记录转换工程"></a>1）建立过滤记录转换工程</h4><p>使用Ctrl+N快捷键，创建【过滤记录】转换工程。接着创建【Excel输入】组件，设置参数，导入“2019年10月年级月考数学成绩.xls”文件，预览数据，如图所示，文件包括有1班、2班的数据。</p>
<p><img src="/img/kettle/kettle77.png" alt="kettle"> </p>
<p>在【过滤记录】转换工程中，单击【核心对象】选项卡，展开【流程】对象，选中【过滤记录】组件，并拖拽至右边工作区中。由【Excel输入】组件指向【过滤记录】组件，建立节点连接，如图所示：</p>
<p><img src="/img/kettle/kettle78.png" alt="kettle"> </p>
<h4 id="2）设置参数-6"><a href="#2）设置参数-6" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【过滤记录】组件，弹出【过滤记录】对话框，如图所示：</p>
<p><img src="/img/kettle/kettle79.png" alt="kettle"> </p>
<p>【过滤记录】组件的参数包含组件的基础参数和【条件】表达式参数，有关参数的说明如表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>参数名称</strong></th>
<th><strong>说明</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>基础参数</strong></td>
<td><strong>步骤名称</strong></td>
<td>表示【过滤记录】组件名称，在单个转换工程中，名称必须唯一，默认值为【过滤记录】组件名称。</td>
</tr>
<tr>
<td><strong>发送true数据给步骤</strong></td>
<td>表示当条件为true时，记录被发送到此组件（步骤）。此参数也可以在与下一个组件（步骤）进行节点连接是设置，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>发送false数据给步骤</strong></td>
<td>表示当条件为false时，记录被发送到此组件（步骤）。此参数也可以在与下一个组件（步骤）进行节点连接是设置，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>条件</strong></td>
<td>表示过滤条件的表达式，在【条件】表达式输入框中设置表达式中各个参数默认值为空。</td>
</tr>
</tbody>
</table>
</div>
<p>条件表达式是由条件函数（运算符）构成的一个赋值语句，格式为：&lt;字段&gt;&lt;条件函数&gt;&lt;表达式&gt;，格式的中间为比较函数，左边为字段，右边是值表达式，如a=5、a&gt;(b+2)、a&lt;=10等。为了方便读者理解，在【条件】表达式输入框中，增加了条件表达式设置的指向说明，如图所示：</p>
<p><img src="/img/kettle/kettle80.png" alt="kettle"> </p>
<p>1）增加子条件</p>
<p>单击+图表可以增加子条件，这时在【条件】表达式输入框中，显示出增加的条件表达式，初次生成的是一条“null=[ ]”的空表达式，如图所示：</p>
<p><img src="/img/kettle/kettle81.png" alt="kettle"> </p>
<p>单击“null=[ ]”空表达式，可对该表达式进行设置，如图所示，点击“向上”按钮可以向上切换回条件表达式。</p>
<p><img src="/img/kettle/kettle82.png" alt="kettle"> </p>
<p>右键单击子条件表达式，弹出右键快捷菜单，可以对子条件进行编辑、删除、复制、粘贴、移动位置等操作，如图所示：</p>
<p><img src="/img/kettle/kettle83.png" alt="kettle"> </p>
<p>2）选择输入流的字段</p>
<p>单击“选择输入流字段”指向的【<field>】字段输入框，弹出【字段】对话框，列出输入流字段表，选择需要过滤的字段，选中“班级”字段，如图所示，单击下方【确定】按钮，确定输入流字段。</p>
<p><img src="/img/kettle/kettle84.png" alt="kettle"> </p>
<p>3）选择比较函数</p>
<p>单击“比较函数”指向的【=】函数输入框，弹出【函数】对话框，并列出过滤比较函数，有关过滤比较函数的说明如表所示（部分）：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>函数名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>REGEXP</strong></td>
<td>表示正则表达式，判断表达式字段是否与模式匹配。</td>
</tr>
<tr>
<td><strong>IN NULL</strong></td>
<td>表示为空，判断表达式字段是否为空。</td>
</tr>
<tr>
<td><strong>IS NOT NULL</strong></td>
<td>表示不为空，判断表达式字段是否不为空。</td>
</tr>
<tr>
<td><strong>IN LIST</strong></td>
<td>表示在列表中，判断表达式字段是否在指定的list列表中。</td>
</tr>
<tr>
<td><strong>CONTAINS</strong></td>
<td>表示包含，判断表达式字段是否包含右边的值。</td>
</tr>
<tr>
<td><strong>STARTS WITH</strong></td>
<td>表示以什么开始，判断表达式字段是否以右边的值开始。</td>
</tr>
<tr>
<td><strong>ENDS WITH</strong></td>
<td>表示以什么结束，判断表达式字段是否以右边的值结束。</td>
</tr>
<tr>
<td><strong>LIKE</strong></td>
<td>表示包括，判断表达式字段是否包括右边的值。</td>
</tr>
<tr>
<td><strong>TRUE</strong></td>
<td>表示真，判断表达式字段是否为真。</td>
</tr>
</tbody>
</table>
</div>
<p>选择“=”的过滤比较函数，单击【确定】，确认过滤比较函数。</p>
<p>4）输入比较的值</p>
<p>单击“输入要比较的值”指向的【<vallue>】值输入框，弹出【E输入一个值】对话框，输入比较的值。</p>
<p>*有关【E输入一个值】对话框中的参数的说明如表所示。需要注意，若设置“输入要比较的值”指向的【<value>】值参数，则不能设置“选择要比较的字段”指向的【<field>】字段参数，二者只能选其一。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>参数名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>类型</strong></td>
<td>表示值的类型。类型选项有：BigNumber、Binary、Boolean、Date、Integer、Internet、Address、Number、String、Timestamp。默认值为String。</td>
</tr>
<tr>
<td><strong>值</strong></td>
<td>表示值，可以是具体值或表达式，默认值为1.</td>
</tr>
<tr>
<td><strong>转换格式</strong></td>
<td>表示值的转换格式，默认值为空。</td>
</tr>
<tr>
<td><strong>长度</strong></td>
<td>表示值的长度，默认值为-1。</td>
</tr>
<tr>
<td><strong>精度</strong></td>
<td>表示值的精度，默认值为-1。</td>
</tr>
</tbody>
</table>
</div>
<p>5）选择比较字段</p>
<p>单击“选择要比较的字段”指向的【<field>】字段输入框，弹出类似的【字段】对话框，选中要比较的字段，单击确定按钮，确定要比较的字段。同样，若设置了“选择要比较的字段”指向的【<field>】字段参数，则不能设置“输入要比较的值”指向的【<value>】值参数，二者只能选其一。</p>
<p><img src="/img/kettle/kettle85.png" alt="kettle"> </p>
<p>6）条件取反</p>
<p>鼠标移向“条件取反”指向的输入框，显示出黑底红字的“NOT”，单击该输入框并移开鼠标，此时显示白底黑字的“NOT”，表示条件取反，即若表达式为true，则条件为false。</p>
<p>若表达式为false，则条件true。“条件取反”指向的输入框为一个奇偶输入框，单击取反，再次单击则取正。</p>
<p>在导入的“2019年10月年级月考数学成绩.xls”文件中，过滤掉不是2班的数据，对条件表达式按照下表的设置。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>输入流【<filed>】字段</strong></th>
<th><strong>【=】比较函数</strong></th>
<th><strong>【<Value>】输入一个值</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>班级</strong></td>
<td>=</td>
<td>单击【<field>】输入框，弹出【E输入一个值】对话框，对参数进行设置，如下图所示。</td>
</tr>
</tbody>
</table>
</div>
<p><img src="/img/kettle/kettle85.png" alt="kettle"> </p>
<p>此时完成【过滤记录】组件参数的设置，如图所示：</p>
<p><img src="/img/kettle/kettle86.png" alt="kettle"> </p>
<h4 id="3）预览结果数据-4"><a href="#3）预览结果数据-4" class="headerlink" title="3）预览结果数据"></a>3）预览结果数据</h4><p>在【过滤记录】转换工程中，单击【过滤记录】组件，预览过滤记录后的数据，如图所示：</p>
<p><img src="/img/kettle/kettle87.png" alt="kettle"> </p>
<h2 id="十七、Kettle-值映射"><a href="#十七、Kettle-值映射" class="headerlink" title="十七、Kettle 值映射"></a>十七、Kettle 值映射</h2><hr>
<h3 id="17-1、任务描述"><a href="#17-1、任务描述" class="headerlink" title="17.1、任务描述"></a>17.1、任务描述</h3><ul>
<li>在数据处理系统中，为了加快处理速度、减少内存和存储空间消耗，往往使用数字、字母，或他们的组合表示真实的数据含义，例如，用“1”和“0”分别表示性别，难以直接看懂。</li>
<li>在某校学生的“学籍信息.xls”文件中，性别字段数据分别用“1”和“0”表示。为了更加直观、一目了然地读懂学生的学籍信息，需要使用【值映射】组件，还原其对应的值“男”或“女”。</li>
<li>kettle值映射能够解决这一需求。</li>
</ul>
<h3 id="17-2、实现思路"><a href="#17-2、实现思路" class="headerlink" title="17.2、实现思路"></a>17.2、实现思路</h3><ul>
<li>建立【值映射】转换工程。</li>
<li>设置【值映射】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="17-3、操作过程"><a href="#17-3、操作过程" class="headerlink" title="17.3、操作过程"></a>17.3、操作过程</h3><h4 id="1）建立值映射转换工程"><a href="#1）建立值映射转换工程" class="headerlink" title="1）建立值映射转换工程"></a>1）建立值映射转换工程</h4><p>使用Ctrl+N快捷键，创建【值映射】转换工程。接着创建【Excel输入】组件，设置参数，导入“学籍信息.xls”文件，预览数据，如图所示。</p>
<ul>
<li><p>当前数据中，“性别”字段的数据，以“0”或“1”表示；</p>
</li>
<li><p>“学籍”字段的数据，以“H”或“J”表示；</p>
</li>
<li><p>“籍贯”字段有一些数据前面有空格。</p>
<p><img src="/img/kettle/kettle88.png" alt="kettle"> </p>
</li>
</ul>
<p>在【值映射】转换工程中，单击【核心对象】选项卡，展开【转换】对象，选中【值映射】组件，并拖拽至右边工作区中。由【Excel输入】组件指向【值映射】组件，建立节点连接，如图所示。</p>
<p><img src="/img/kettle/kettle89.png" alt="kettle"> </p>
<h4 id="2）设置参数-7"><a href="#2）设置参数-7" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【值映射】组件，弹出【值映射】对话框，如图所示。</p>
<p><img src="/img/kettle/kettle90.png" alt="kettle"> </p>
<p>将“性别”字段中“1”“0”数据分别用“男”“女”映射替换，对参数进行设置。此时完成【值映射】组件参数的设置，如图所示。</p>
<p><img src="/img/kettle/kettle91.png" alt="kettle"> </p>
<h4 id="3）预览结果数据-5"><a href="#3）预览结果数据-5" class="headerlink" title="3）预览结果数据"></a>3）预览结果数据</h4><p>在【值映射】转换工程中，单击【值映射】组件，预览进行值映射操作后的数据，如图所示。</p>
<p><img src="/img/kettle/kettle92.png" alt="kettle"> </p>
<h2 id="十八、Kettle-字符串替换"><a href="#十八、Kettle-字符串替换" class="headerlink" title="十八、Kettle 字符串替换"></a>十八、Kettle 字符串替换</h2><hr>
<h3 id="18-1、任务描述"><a href="#18-1、任务描述" class="headerlink" title="18.1、任务描述"></a>18.1、任务描述</h3><p>字符串替换与值映射非常类似，不同之处在于字符串替换的字段值是字符串，值映射的字段可以是多种数据类型。</p>
<p>由于在“学籍信息.xls”文件中，学籍数据用“H”或“J”表示，需要使用【字符串替换】组件，分别还原其对应的值“户籍生”和“借读生”。</p>
<h3 id="18-2、实现思路"><a href="#18-2、实现思路" class="headerlink" title="18.2、实现思路"></a>18.2、实现思路</h3><ul>
<li>建立【字符串替换】转换工程。</li>
<li>设置【字符串替换】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="18-3、操作过程"><a href="#18-3、操作过程" class="headerlink" title="18.3、操作过程"></a>18.3、操作过程</h3><h4 id="1）建立字符串替换转换工程"><a href="#1）建立字符串替换转换工程" class="headerlink" title="1）建立字符串替换转换工程"></a>1）建立字符串替换转换工程</h4><p>使用Ctrl+N快捷键，创建【字符串替换】转换工程。接着创建【Excel输入】组件，设置参数，导入“学籍信息.xls”文件。</p>
<p>在【字符串替换】转换工程中，单击【核心对象】选项卡，展开【转换】对象，选中【字符串替换】组件，并拖拽至右边工作区中。由【Excle输入】组件指向【字符串替换】组件，建立节点连接，如图所示。</p>
<p><img src="/img/kettle/kettle93.png" alt="kettle"> </p>
<h4 id="2）设置参数-8"><a href="#2）设置参数-8" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【字符串替换】组件，弹出【字符串替换】对话框，如图所示。</p>
<p><img src="/img/kettle/kettle94.png" alt="kettle"> </p>
<p>【字符串替换】组件的参数包含组件的基础参数和【字段】表参数，有关参数说明如表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>参数名称</strong></th>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>基础参数</strong></td>
<td><strong>步骤名称</strong></td>
<td>表示【字符串替换组件名称】，在单个转换工程中，名称必须唯一。默认值是【字符串替换】组件名称。</td>
</tr>
<tr>
<td><strong>字段</strong></td>
<td>表示对将要进行字符串替换的字段参数，使用一个【字段】表对字段参数进行设置，有关参数说明如下所示。</td>
<td></td>
</tr>
<tr>
<td><strong>输入流字段</strong></td>
<td>表示要进行字符串替换的输入流字段。默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>输出流字段</strong></td>
<td>表示进行字符串替换后的输出流字段，为空时覆盖原来要进行替换的输入流字段，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>使用正则表达式</strong></td>
<td>表示是否使用正则表达式，选项有：Y、N。默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>搜索</strong></td>
<td>表示是否搜索此次字符串的匹配值，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>使用…替换</strong></td>
<td>表示要替换匹配值的字符串数据，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>设置为空串?</strong></td>
<td>表示是否设置空字符串，选项有：Y、N。默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>使用字段值替换</strong></td>
<td>表示使用一个字段值替换字符串，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>整个单词匹配</strong></td>
<td>表示是否要整个单词都匹配，选项有：Y、N，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>大小写敏感</strong></td>
<td>表示是否区分大小写，选项有：Y、N，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>In Unicode</strong></td>
<td>表示是否设置Unicode，选项有：Y、N，默认值为空。</td>
</tr>
</tbody>
</table>
</div>
<p>在【字符串替换】对话框中，设置参数，对输入数据中“学籍”字段中数据“H”和“J”，分别使用“户籍生”和“借读生”进行替换，步骤如下：</p>
<p>1）确认组件名称。【步骤名称】保留默认值，设置为“字符串替换”。</p>
<p>2）确定字段参数。对【字段】表的参数进行设置。此时完成【字符串替换】组件参数的设置，如图所示。</p>
<p><img src="/img/kettle/kettle95.png" alt="kettle"> </p>
<h4 id="3）预览结果数据-6"><a href="#3）预览结果数据-6" class="headerlink" title="3）预览结果数据"></a>3）预览结果数据</h4><p>在【字符串替换】转换工程中，单击【字符串替换】组件，预览字符串替换后的数据，如图所示。</p>
<p><img src="/img/kettle/kettle96.png" alt="kettle"> </p>
<h2 id="十九、Kettle-字符串操作"><a href="#十九、Kettle-字符串操作" class="headerlink" title="十九、Kettle 字符串操作"></a>十九、Kettle 字符串操作</h2><hr>
<h3 id="19-1、任务描述"><a href="#19-1、任务描述" class="headerlink" title="19.1、任务描述"></a>19.1、任务描述</h3><p>在数据输入过程中，有时候不小心输入的多余的空格、错误的字符等，字符串操作是指将数据中不需要的字符处理掉，Kettle字符串操作可以解决这一需求。</p>
<p>由于在“学籍信息.xls”文件中，学生学籍信息的籍贯字段数据前后有多余的空格，需要使用【字符串操作】，去除这些空格，规范学籍信息。</p>
<h3 id="19-2、实现思路"><a href="#19-2、实现思路" class="headerlink" title="19.2、实现思路"></a>19.2、实现思路</h3><ul>
<li>建立【字符串操作】转换工程。</li>
<li>设置【字符串操作】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="19-3、操作过程"><a href="#19-3、操作过程" class="headerlink" title="19.3、操作过程"></a>19.3、操作过程</h3><h4 id="1）建立字符串操作转换工程"><a href="#1）建立字符串操作转换工程" class="headerlink" title="1）建立字符串操作转换工程"></a>1）建立字符串操作转换工程</h4><p>使用Ctrl+N快捷键，创建【字符串操作】转换工程。接着创建【Excel输入】组件，设置参数，导入“学籍信息.xls”文件。</p>
<p>在【字符串操作】转换工程中，单击【核心对象】选项卡，展开【转换】对象，选中【字符操作】组件，并拖拽至右边工作区中。由【Excel输入】组件指向【字符串操作】组件，建立节点连接，如图所示。</p>
<p><img src="/img/kettle/kettle98.png" alt="kettle"> </p>
<h4 id="2）设置参数-9"><a href="#2）设置参数-9" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【字符串操作】组件，弹出【String operations】对话框，如图所示。</p>
<p><img src="/img/kettle/kettle99.png" alt="kettle"> </p>
<p>【字符串操作】组件的参数包含组件的基础参数和【The fields to process】表字段参数，有关参数的说明如表所示。</p>
<p><img src="/img/kettle/kettle100.png" alt="kettle"> </p>
<p>在【String operations】对话框中，设置参数，删除“籍贯”字段数据中的空格，步骤如下：</p>
<p>1）确定组件名称。【Step name】参数保留默认值“字符串操作”。</p>
<p>2）设置字符串操作的字段参数。在【The fields to process】表中设置字段参数，在表第1行，单击【In steam field】输入框，在输入流字段中选中“籍贯”字段，单击【Trim type】输入框，在选项中选中“both”，其他参数使用默认值。此时完成【字符串操作】组件参数的设置，如图所示。</p>
<p><img src="/img/kettle/kettle101.png" alt="kettle"> </p>
<h4 id="3）预览结果数据-7"><a href="#3）预览结果数据-7" class="headerlink" title="3）预览结果数据"></a>3）预览结果数据</h4><p>在【字符串操作】转换工程中，单击【字符串操作】组件，预览进行字符串操作后的数据，如图所示。</p>
<p><img src="/img/kettle/kettle102.png" alt="kettle"> </p>
<h2 id="二十、Kettle-分组"><a href="#二十、Kettle-分组" class="headerlink" title="二十、Kettle 分组"></a>二十、Kettle 分组</h2><hr>
<h3 id="20-1、任务描述"><a href="#20-1、任务描述" class="headerlink" title="20.1、任务描述"></a>20.1、任务描述</h3><p>在进行数据统计中，往往要对类别、区域、型号等范围进行统计，分组是对指定的字段或字段集合的数据进行分组统计，Kettle分组组件可以解决这一需求。</p>
<p>为了了解各班级和学生的学业情况，需要对“2019年10月月考英语成绩.xls”文件，使用【分组】组件，统计各班的人数和平均分数。</p>
<h3 id="20-2、实现思路"><a href="#20-2、实现思路" class="headerlink" title="20.2、实现思路"></a>20.2、实现思路</h3><ul>
<li>建立【分组】转换工程。</li>
<li>设置【分组】组件参数。</li>
<li>预览结果数据。</li>
</ul>
<h3 id="20-3、操作过程"><a href="#20-3、操作过程" class="headerlink" title="20.3、操作过程"></a>20.3、操作过程</h3><h4 id="1）建立分组转换工程"><a href="#1）建立分组转换工程" class="headerlink" title="1）建立分组转换工程"></a>1）建立分组转换工程</h4><p>在分组之前，必须使用关键字段对数据记录进行排序，确定哪些记录分组在一起。参考Kettle 排序记录的操作过程，建立排序并浏览“2019年10月月考英语成绩.xls”文件数据。</p>
<p>使用Ctrl+N快捷键，创建【分组】转换工程。接着创建【Excel输入】组件，设置参数，导入“2019年10月月考英语成绩.xls”文件。</p>
<p>再创建【排序记录】组件，并由【Excel输入】组件指向【排序记录】组件，建立节点连接，如图所示。</p>
<p><img src="/img/kettle/kettle103.png" alt="kettle"> </p>
<p>双击【排序记录】组件，设置“班级”字段参数，按照生序排序，预览排序记录数据，如图所示，“1班”和“2班”分别被排序在一起。</p>
<p><img src="/img/kettle/kettle104.png" alt="kettle"> </p>
<p>在【分组】转换工程中，单击【核心对象】选项卡，展开【统计】对象，找到【分组】组件，并拖拽到右边工作区中，并由【排序记录】组件指向【分组】组件，建立节点连接，如图所示。</p>
<p><img src="/img/kettle/kettle105.png" alt="kettle"> </p>
<h4 id="2）设置参数-10"><a href="#2）设置参数-10" class="headerlink" title="2）设置参数"></a>2）设置参数</h4><p>双击【分组】组件，弹出【分组】对话框，如图所示。</p>
<p><img src="/img/kettle/kettle106.png" alt="kettle"> </p>
<p>【分组】组件参数包含组件的基础参数，以及【构成分组的字段】和【聚合】字段参数，参数说明如表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>参数名称</strong></th>
<th><strong>说明</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>基础参数</strong></td>
<td><strong>步骤名称</strong></td>
<td>表示分组的组件名称，在单个转换工程中，名称必须唯一。默认值是【分组】的组件名称。</td>
</tr>
<tr>
<td><strong>包括所有的行</strong></td>
<td>表示是否包括所有记录。使用勾选框设置参数，希望在输出中包含所有记录，则勾选，只想输出聚合记录，则不勾选。默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>排序目录</strong></td>
<td>表示指定存储临时文件的目录。分组的记录数超过5000个时，必须指定搞一个目录。此参数只有勾选【包括所有的行】参数后才能设置，默认值是系统的标准临时目录%%java.io.tmpdir%%。</td>
<td></td>
</tr>
<tr>
<td><strong>临时文件前缀</strong></td>
<td>表示命名临时文件的文件前缀，只有勾选【包括所有的行】参数后才能设置。默认值为grp。</td>
<td></td>
</tr>
<tr>
<td><strong>添加行号，在每个组中重新启动</strong></td>
<td>表示是否添加一个记录号，在每个组中从1重新启动。勾选此参数时所有记录都包含在输出中，且每个记录都有一个记录号。此参数在勾选【包括所有的行】参数后才有效。默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>行号列名</strong></td>
<td>表示要为每个新组添加记录的字段名称。默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>总返回一个结果行</strong></td>
<td>表示是否即使没有输入记录，也返回结果记录。当没有输入记录时，返回计数为0。如果只想有输入时才输出结果记录，则此参数不勾选。默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>构成分组的字段</strong></td>
<td>表示分组的字段参数。分组的字段可以有多个，使用一个【构成分组的字段】表设置【分组字段】参数，可以设置多个分组子段。需要注意的是，如果没有分组的字段，那么该表留空来计算整个数据集的聚合函数。默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>聚合</strong></td>
<td>表示聚合字段的参数，使用一个【聚合】表来设置聚合字段名称、聚合方法和输出结果新字段名称，有关聚合字段的参数说明如下内容所示。</td>
<td></td>
</tr>
<tr>
<td><strong>名称</strong></td>
<td>表示聚合字段的名称，输出结果的新字段名称，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>Subject</strong></td>
<td>表示对其使用聚合方法的对象字段，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>类型</strong></td>
<td>表示聚合方法。在下拉框中选取聚合方法，默认值为空。</td>
<td></td>
</tr>
<tr>
<td><strong>值</strong></td>
<td>表示聚合的值，默认值为空。</td>
</tr>
</tbody>
</table>
</div>
<p>在【分组】对话框中，设置参数，分组统计各班的人数和平均分数，步骤如下：</p>
<p>1）设置组件名称。【步骤名称】参数采用默认值“分组”。</p>
<p>2）确定分组字段。在【构成分组字段】表的第1行，【分组字段】设置为“班级”。</p>
<p>3）确定聚合字段并设置参数。对【聚合】表的参数进行设置。此时完成【分组】组件参数的设置，如图所示。</p>
<p><img src="/img/kettle/kettle107.png" alt="kettle"> </p>
<h4 id="3）预览结果数据-8"><a href="#3）预览结果数据-8" class="headerlink" title="3）预览结果数据"></a>3）预览结果数据</h4><p>在【分组】转换工程中，单击【分组】组件，预览数据分组后的结果，如图所示。</p>
<p><img src="/img/kettle/kettle108.png" alt="kettle"> </p>

                
                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2024/12/11/使用AzureAPI实现outlook邮件扫描/" data-toggle="tooltip" data-placement="top" title="使用AzureAPI实现outlook邮件扫描">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2024/10/09/java项目文件水印功能实现/" data-toggle="tooltip" data-placement="top" title="java项目文件水印功能实现">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- tip start -->
                

                
                <div class="comment_notes">
                    <p>
                        This is copyright.
                    </p>
                </div>
                
                <!-- tip end -->

                <!-- Music start-->
                
                

<link rel="stylesheet" href="/css/music-player/fonts/iconfont.css">


<link rel="stylesheet" href="/css/music-player/css/reset.css">


<link rel="stylesheet" href="/css/music-player/css/player.css">



<div class="music-player">
    <audio class="music-player__audio" ></audio>
    <div class="music-player__main">
        <div class="music-player__blur"></div>
        <div class="music-player__disc">
            <div class="music-player__image">
                <img width="100%" src="" alt="">
            </div>
            <div class="music-player__pointer"><img width="100%" src="/img/cd_tou.png" alt=""></div>
        </div>
        <div class="music-player__controls">
            <div class="music__info">
                <h3 class="music__info--title">...</h3>
                <p class="music__info--singer">...</p>
            </div>
            <div class="player-control">
                <div class="player-control__content">
                    <div class="player-control__btns">
                        <div class="player-control__btn player-control__btn--prev"><i class="iconfont icon-prev"></i></div>
                        <div class="player-control__btn player-control__btn--play"><i class="iconfont icon-play"></i></div>
                        <div class="player-control__btn player-control__btn--next"><i class="iconfont icon-next"></i></div>
                        <div class="player-control__btn player-control__btn--mode"><i class="iconfont icon-loop"></i></div>
                    </div>
                    <div class="player-control__volume">
                        <div class="control__volume--icon player-control__btn"><i class="iconfont icon-volume"></i></div>
                        <div class="control__volume--progress player_progress"></div>
                    </div>
                </div>
                <div class="player-control__content">
                    <div class="player__song--progress player_progress"></div>
                    <div class="player__song--timeProgess nowTime">00:00</div>
                    <div class="player__song--timeProgess totalTime">00:00</div>
                </div>

            </div>

        </div>
    </div>
</div>


<script src="/js/music-player/utill.js"></script>


<script src="/js/music-player/jquery.min.js"></script>


<script src="/js/music-player/player.js"></script>


                
                <!-- Music end -->

                <!-- Sharing -->
                
                <!-- Sharing -->

                <!-- gitment start -->
                
                <!-- gitment end -->

                <!-- 来必力City版安装代码 -->
                
                <!-- City版安装代码已完成 -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Kettle简介"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">Kettle简介</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#一、Kettle简介"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">一、Kettle简介</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#kettle的特点"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">kettle的特点</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#二、Kettle-安装与部署"><span class="toc-nav-number"></span> <span class="toc-nav-text">二、Kettle 安装与部署</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-1、下载"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">2.1、下载</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-2、安装"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">2.2、安装</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-3、环境变量配置"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">2.3、环境变量配置</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-4、常见问题"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">2.4、常见问题</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#解决方法：打开系统盘用户目录下的repositories-xml配置文件，将乱码内容删除，并删除-spoonrc文件，重启Kettle。"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">解决方法：打开系统盘用户目录下的repositories.xml配置文件，将乱码内容删除，并删除.spoonrc文件，重启Kettle。</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#三、Kettle-运行界面与基本概念"><span class="toc-nav-number"></span> <span class="toc-nav-text">三、Kettle 运行界面与基本概念</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-1、运行界面"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">3.1、运行界面</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-2、基本概念"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">3.2、基本概念</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）可视化编程"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">1）可视化编程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）转换（Transformation）"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">2）转换（Transformation）</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）步骤（Step）"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">3）步骤（Step）</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#4）跳（Hop）"><span class="toc-nav-number">2.4.</span> <span class="toc-nav-text">4）跳（Hop）</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#5）数据行——数据类型"><span class="toc-nav-number">2.5.</span> <span class="toc-nav-text">5）数据行——数据类型</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#6）数据行——元数据"><span class="toc-nav-number">2.6.</span> <span class="toc-nav-text">6）数据行——元数据</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#7）日志——I-O-R-W-U-E"><span class="toc-nav-number">2.7.</span> <span class="toc-nav-text">7）日志——I O R W U E</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#四、Kettle-读取CSV文件"><span class="toc-nav-number"></span> <span class="toc-nav-text">四、Kettle 读取CSV文件</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-1、输入"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">4.1、输入</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-2、CVS文件"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">4.2、CVS文件</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-3、多个文件输入"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">4.3、多个文件输入</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#五、Kettle-导入文件夹下的多个文件"><span class="toc-nav-number"></span> <span class="toc-nav-text">五、Kettle 导入文件夹下的多个文件</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">5.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-2、操作过程"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">5.2、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-新建一个转换"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">1. 新建一个转换</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-“文本文件输入”"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">2. “文本文件输入”</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3-拆分字段"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">3.拆分字段</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#5-表输出"><span class="toc-nav-number">2.4.</span> <span class="toc-nav-text">5.表输出</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#6-启动运行"><span class="toc-nav-number">2.5.</span> <span class="toc-nav-text">6.启动运行</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#六、Kettle-创建数据库连接"><span class="toc-nav-number"></span> <span class="toc-nav-text">六、Kettle 创建数据库连接</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6-1、任务描述书"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">6.1、任务描述书</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">6.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">6.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立数据库连接"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立数据库连接</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6-4、设置参数"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">6.4、设置参数</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#七、Kettle-建立共享-停止共享数据库连接"><span class="toc-nav-number"></span> <span class="toc-nav-text">七、Kettle 建立共享&#x2F;停止共享数据库连接</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-1、建立共享"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">7.1、建立共享</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-2、停止共享"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">7.2、停止共享</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#八、Kettle-表输入"><span class="toc-nav-number"></span> <span class="toc-nav-text">八、Kettle 表输入</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">8.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">8.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">8.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立表输入转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立表输入转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-4、预览结果数据"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">8.4、预览结果数据</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#九、Kettle-Excel输入"><span class="toc-nav-number"></span> <span class="toc-nav-text">九、Kettle Excel输入</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#9-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">9.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#9-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">9.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#9-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">9.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立Excel输入转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立Excel输入转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-1"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十、Kettle-生成记录"><span class="toc-nav-number"></span> <span class="toc-nav-text">十、Kettle 生成记录</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#10-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">10.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#10-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">10.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#10-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">10.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1、建立【生成记录】转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1、建立【生成记录】转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2、设置参数"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2、设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3、预览数据结果"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3、预览数据结果</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十一、Kettle-生成随机数"><span class="toc-nav-number"></span> <span class="toc-nav-text">十一、Kettle 生成随机数</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#11-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">11.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#11-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">11.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#11-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">11.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1、简历生成随机数转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1、简历生成随机数转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2、设置参数-1"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2、设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3、预览结果数据"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3、预览结果数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十二、Kettle-获取系统信息"><span class="toc-nav-number"></span> <span class="toc-nav-text">十二、Kettle 获取系统信息</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#12-1、相关概念"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">12.1、相关概念</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#12-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">12.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#12-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">12.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立获取系统信息转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立获取系统信息转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-2"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）预览结果数据"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3）预览结果数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十三、Kettle-排序记录"><span class="toc-nav-number"></span> <span class="toc-nav-text">十三、Kettle 排序记录</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#13-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">13.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#13-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">13.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#13-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">13.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立排序记录转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立排序记录转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-3"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）预览结果数据-1"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3）预览结果数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十四、Kettle-去除重复记录"><span class="toc-nav-number"></span> <span class="toc-nav-text">十四、Kettle 去除重复记录</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#14-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">14.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#14-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">14.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#14-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">14.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立去除重复记录转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立去除重复记录转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-4"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）预览结果数据-2"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3）预览结果数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十五、Kettle-替换NULL值"><span class="toc-nav-number"></span> <span class="toc-nav-text">十五、Kettle 替换NULL值</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#15-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">15.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#15-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">15.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#15-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">15.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立替换NULL值转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立替换NULL值转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-5"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）预览结果数据-3"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3）预览结果数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十六、Kettle-过滤记录"><span class="toc-nav-number"></span> <span class="toc-nav-text">十六、Kettle 过滤记录</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#16-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">16.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#16-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">16.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#16-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">16.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立过滤记录转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立过滤记录转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-6"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）预览结果数据-4"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3）预览结果数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十七、Kettle-值映射"><span class="toc-nav-number"></span> <span class="toc-nav-text">十七、Kettle 值映射</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#17-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">17.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#17-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">17.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#17-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">17.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立值映射转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立值映射转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-7"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）预览结果数据-5"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3）预览结果数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十八、Kettle-字符串替换"><span class="toc-nav-number"></span> <span class="toc-nav-text">十八、Kettle 字符串替换</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#18-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">18.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#18-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">18.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#18-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">18.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立字符串替换转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立字符串替换转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-8"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）预览结果数据-6"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3）预览结果数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#十九、Kettle-字符串操作"><span class="toc-nav-number"></span> <span class="toc-nav-text">十九、Kettle 字符串操作</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#19-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">19.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#19-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">19.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#19-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">19.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立字符串操作转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立字符串操作转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-9"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）预览结果数据-7"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3）预览结果数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#二十、Kettle-分组"><span class="toc-nav-number"></span> <span class="toc-nav-text">二十、Kettle 分组</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#20-1、任务描述"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">20.1、任务描述</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#20-2、实现思路"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">20.2、实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#20-3、操作过程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">20.3、操作过程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1）建立分组转换工程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">1）建立分组转换工程</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2）设置参数-10"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">2）设置参数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3）预览结果数据-8"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">3）预览结果数据</span></a></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#kettle" title="kettle">kettle</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://blog.csdn.net/Where_dWanaGo" target="_blank">Dusign&#39;s Blog</a></li>
                    
                        <li><a href="#" target="_blank">Dusign&#39;s Web</a></li>
                    
                        <li><a href="https://github.com/raineddown" target="_blank">raineddown&#39;s Github</a></li>
                    
                        <li><a href="#" target="_blank">Other</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>


<style  type="text/css">
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">

                
                    <li>
                        <a target="_blank"  href="https://github.com/raineddown">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                


                

                


                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; John Doe 2024 
                    <br>
                    Powered by 
                    <a href="https://github.com/dusign/hexo-theme-snail" target="_blank" rel="noopener">
                        <i>hexo-theme-snail</i>
                    </a> | 
                    <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0"
                        width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=dusign&repo=hexo-theme-snail&type=star&count=true">
                    </iframe>
                </p>
            </div>
        </div>
    </div>

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>


<!-- Search -->

<script src="/js/search.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://radarsoftware.cn/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->


<!-- Search -->

    <script type="text/javascript">      
        var search_path = "search.xml";
        if (search_path.length == 0) {
            search_path = "search.xml";
        }
    var path = "/" + search_path;
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


<!-- busuanzi -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

    
        <!-- background effects line -->
        

        
            <script type="text/javascript" src="/js/mouse-click.js" content='[&quot;🌱&quot;,&quot;just do it&quot;,&quot;🍀&quot;,&quot;🍂&quot;,&quot;🍃&quot;]' color='[&quot;rgb(121,93,179)&quot; ,&quot;rgb(76,180,231)&quot; ,&quot;rgb(184,90,154)&quot; ,&quot;rgb(242,153,29)&quot; ,&quot;rgb(22,36,92)&quot; ,&quot;rgb(119,195,79)&quot; ,&quot;rgb(119,195,79)&quot;]'></script>
        

        <!-- background effects end -->
    

    <!--<script size="50" alpha='0.3' zIndex="-999" src="/js/ribbonStatic.js"></script>-->
    
        <script src="/js/ribbonDynamic.js"></script>
    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>

</html>
